# ë‚´ì¼ë°°ì›€ìº í”„ 240525 TIL
Java 28ì¼ì°¨
ì¸ì¦ê³¼ ì¸ê°€
-------------------------------------------------------------------------------

# ì¸ì¦ê³¼ ì¸ê°€

## 03. ì¸ì¦ê³¼ ì¸ê°€ë€ ë¬´ì—‡ì¼ê¹Œ?
- ì¸ì¦ê³¼ ì¸ê°€
    - **ì¸ì¦(Authentication)**
        - ì¸ì¦ì€ í•´ë‹¹ ìœ ì €ê°€ ì‹¤ì œ ìœ ì €ì¸ì§€ ì¸ì¦í•˜ëŠ” ê°œë…ì…ë‹ˆë‹¤.
        - ì—¬ëŸ¬ë¶„ì˜ ìŠ¤ë§ˆíŠ¸í°ì— ì§€ë¬¸ì¸ì‹, ì´ìš©í•˜ëŠ” ì‚¬ì´íŠ¸ì— ë¡œê·¸ì¸ ë“±ê³¼ ê°™ì´, ì‹¤ì œ ê·¸ ìœ ì €ê°€ ë§ëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ì ˆì°¨ ì…ë‹ˆë‹¤.
    - **ì¸ê°€(Authorization)**
        - ì¸ê°€ëŠ” í•´ë‹¹ ìœ ì €ê°€ íŠ¹ì • ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•œì§€ í—ˆê°€ë¥¼ í™•ì¸í•˜ëŠ” ê°œë…ì…ë‹ˆë‹¤. ì˜ˆë¥¼ë“¤ì–´ ê´€ë¦¬ì í˜ì´ì§€-ê´€ë¦¬ì ê¶Œí•œ ê°™ì€ ê²ƒë“¤ì„ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

    ğŸ“Œ ìš°ë¦¬ê°€ ì¸ì¦ê³¼ ì¸ê°€ë¥¼ í—·ê°ˆë ¤ í•˜ëŠ” ì´ìœ ëŠ” ë¡œê·¸ì¸ë§Œ ìƒê°í•´ì„œ ì…ë‹ˆë‹¤.
    ìš°ë¦¬ê°€ ìì£¼ í•˜ëŠ” ë¡œê·¸ì¸ì€ ì¸ì¦ì„ í•  ë•Œ(ë¹„ë°€ë²ˆí˜¸ ì…ë ¥í•˜ê³  ì œì¶œ í•  ë•Œ)ì´ê³ 
    íšŒì›/ë¹„íšŒì› ì—¬ë¶€ì— ë”°ë¼ ë‹¤ë¥¸ ê¶Œí•œì„ ë°›ëŠ” ê²ƒì´ ì¸ê°€ì…ë‹ˆë‹¤.

- **â€œì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸ì¦â€**ì€ ì–´ë– í•œ íŠ¹ìˆ˜ì„±ì´ ìˆì„ê¹Œ?
    1. ì¼ë°˜ì ìœ¼ë¡œ ì„œë²„-í´ë¼ì´ì–¸íŠ¸ êµ¬ì¡°ë¡œ ë˜ì–´ìˆê³ , ì‹¤ì œë¡œ ì´ ë‘ê°€ì§€ ìš”ì†ŒëŠ” ì•„ì£¼ ë©€ë¦¬ ë–¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.
    2. ê·¸ë¦¬ê³  Http ë¼ëŠ” í”„ë¡œí† ì½œì„ ì´ìš©í•˜ì—¬ í†µì‹ í•˜ëŠ”ë°, ê·¸ í†µì‹ ì€ **ë¹„ì—°ê²°ì„±(Connectionless) ë¬´ìƒíƒœ(Stateless)**ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.
    ğŸ‘‰ **ë¹„ì—°ê²°ì„±(Connectionless)**ì€ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šë‹¤ëŠ” ê²ƒ ì…ë‹ˆë‹¤.
    ì±„íŒ…ì´ë‚˜ ê²Œì„ ê°™ì€ ê²ƒë“¤ì„ í•˜ì§€ ì•ŠëŠ” ì´ìƒ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ëŠ” ì‹¤ì œë¡œ ì—°ê²°ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.
    ê·¸ ì´ìœ ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì ˆì•½í•˜ê¸° ìœ„í•´ì„œ ì¸ë°, ë§Œì•½ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ì‹¤ì œë¡œ ê³„ì† ì—°ê²°ë˜ì–´ìˆë‹¤ë©´ í´ë¼ì´ì–¸íŠ¸ëŠ” ê·¸ë ‡ë‹¤ê³  ì³ë„, ì„œë²„ì˜ ë¹„ìš©ì´ ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ ëŠ˜ì–´ë‚˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
    ê·¸ë˜ì„œ ì„œë²„ëŠ” ì‹¤ì œë¡œ í•˜ë‚˜ì˜ ìš”ì²­ì— í•˜ë‚˜ì˜ ì‘ë‹µì„ ë‚´ë²„ë¦¬ê³  ì—°ê²°ì„ ëŠì–´ë²„ë¦¬ê³ ìˆë‹¤ ë¼ê³  ìƒê°í•˜ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤.
    **ë¬´ìƒíƒœ(Stateless)**ëŠ” ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì˜ ìƒíƒœë¥¼ ì €ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.
    ê¸°ì¡´ì˜ ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ê²ƒë“¤ë„ ë§ˆì°¬ê°€ì§€ë¡œ ì„œë²„ì˜ ë¹„ìš©ê³¼ ë¶€ë‹´ì„ ì¦ê°€ì‹œí‚¤ëŠ” ê²ƒ ì´ê¸° ë•Œë¬¸ì— ê¸°ì¡´ì˜ ìƒíƒœê°€ ì—†ë‹¤ê³  ê°€ì •í•˜ëŠ” í”„ë¡œí† ì½œì„ ì´ìš©í•´ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
    ì‹¤ì œë¡œ ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì§ì „ì—, í˜¹ì€ ê·¸ ì „ì— ì–´ë– í•œ ìš”ì²­ì„ ë³´ëƒˆëŠ”ì§€ ê´€ì‹¬ë„ ì—†ê³  ì „í˜€ ì•Œì§€ ëª»í•©ë‹ˆë‹¤.
    ğŸ¤” ì•„ë‹ˆ, ê·¼ë° ìš°ë¦¬ê°€ ì¸í„°ë„· ì‚¬ìš©í• ë•ŒëŠ” ì´ì „ì˜ ì •ë³´ë“¤ì´ ì˜ ìˆëŠ”ê²ƒì²˜ëŸ¼ ì—°ì†ì„±ìˆê²Œ ì‚¬ìš©í•´ì™”ëŠ”ë°ìš”?
    ğŸ‘‰ ì‹¤ì œë¡œ ê·¸ë ‡ê²Œ ëŠê»´ì§€ê¸° ìœ„í•´ì„œ ê°œë°œìë“¤ì´ ë§¤ìš° ë§ì€ ë…¸ë ¥ì„ ê¸°ìš¸ì´ê³  ìˆìŠµë‹ˆë‹¤!
    ì˜ˆë¥¼ë“¤ì–´ ì—¬ëŸ¬ë¶„ì´ ë„¤ì´ë²„ ë‰´ìŠ¤íƒ­ì— ìŠ¤í¬ì¸ íƒ­ì— íŠ¹ì • ê¸°ì‚¬ë¥¼ ë³¸ë‹¤ê³  ìƒê°í•˜ë©´
    /News/Sports/9
    ì™€ ê°™ì´ urlì„ ê³„ì¸µì ìœ¼ë¡œ ì„¤ê³„í•˜ê³ , ë‹¤ìŒ ìš”ì²­ì— ëŒ€í•œ api urlì„ ì´ì „ ê³„ì¸µì—ë§Œ ë‘”ë‹¤ë©´ ì—°ì†ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆë‹¤ê³  ëŠë¼ì‹¤ ìˆ˜ ìˆê² ì£ ?
    ğŸ¤” ê·¸ë ‡ë‹¤ë©´ ì¸ì¦ê³¼ ê°™ì´, í•´ë‹¹ ìœ ì €ê°€ ì¸ì¦ì„ í†µê³¼í–ˆë‹¤ëŠ” ì‚¬ì‹¤ì€ ìƒíƒœê°’ì´ ì•„ë‹Œê°€ìš”?
    ğŸ‘‰ ê·¸ ë¶€ë¶„ì„ ì§€ê¸ˆë¶€í„° ì„¤ëª…í•˜ë ¤ê³  í•©ë‹ˆë‹¤!
    ëª¨ë“  ê²ƒë“¤ì„ ì´í•´í•˜ì‹¤ í•„ìš”ëŠ” ì—†ê³  ì–´ë–»ê²Œ ë¹„ì—°ê²°ì„±, ë¬´ìƒíƒœ í”„ë¡œí† ì½œì—ì„œ â€œìœ ì €ê°€ ì¸ì¦ë˜ì—ˆë‹¤â€ë¼ëŠ” ì •ë³´ë¥¼ ìœ ì§€ì‹œì¼œì•¼ í•œë‹¤ëŠ” ê³¼ì œë¥¼ ì–´ë–»ê²Œ í•´ê²°í–ˆëŠ”ì§€ ê´€ì ì—ì„œ ë³´ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

- ì¸ì¦ì˜ ë°©ì‹
    ğŸ“Œ ì¼ë°˜ì ìœ¼ë¡œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì•„ë˜ ë‘ ê°€ì§€ ë°©ë²•ì„ í†µí•´ì„œ ì¸ì¦ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
    ### ì¿ í‚¤-ì„¸ì…˜ ë°©ì‹ì˜ ì¸ì¦
    ğŸ“Œ ì¿ í‚¤-ì„¸ì…˜ ë°©ì‹ì€ ì„œë²„ê°€ â€˜íŠ¹ì • ìœ ì €ê°€ ë¡œê·¸ì¸ ë˜ì—ˆë‹¤â€™ëŠ” ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.
    ì¸ì¦ê³¼ ê´€ë ¨ëœ ì•„ì£¼ ì•½ê°„ì˜ ì •ë³´ë§Œ ì„œë²„ê°€ ê°€ì§€ê³  ìˆê²Œ ë˜ê³  ìœ ì €ì˜ ì´ì „ ìƒíƒœì˜ ì „ë¶€ëŠ” ì•„ë‹ˆë”ë¼ë„
    ì¸ì¦ê³¼ ê´€ë ¨ëœ ìµœì†Œí•œì˜ ì •ë³´ëŠ” ì €ì¥í•´ì„œ ë¡œê·¸ì¸ì„ ìœ ì§€ì‹œí‚¨ë‹¤ëŠ” ê°œë…ì…ë‹ˆë‹¤.
    - **ì•„ë˜ëŠ” ê·¸ë¦¼ì˜ ê° ë²ˆí˜¸ì— ë”°ë¥¸ ì„¤ëª…ì…ë‹ˆë‹¤**
        1. ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
        2. ì„œë²„ëŠ” DBì˜ ìœ ì € í…Œì´ë¸”ì„ ë’¤ì ¸ì„œ ì•„ì´ë”” ë¹„ë°€ë²ˆí˜¸ë¥¼ ëŒ€ì¡°í•´ë´ì•¼ê² ì£ ?
        3. ì‹¤ì œ ìœ ì €í…Œì´ë¸”ì˜ ì •ë³´ì™€ ì¼ì¹˜í•œë‹¤ë©´ ì¸ì¦ì„ í†µê³¼í•œ ê²ƒìœ¼ë¡œ ë³´ê³  â€œì„¸ì…˜ ì €ì¥ì†Œâ€ì— í•´ë‹¹ ìœ ì €ê°€ ë¡œê·¸ì¸ ë˜ì—ˆë‹¤ëŠ” ì •ë³´ë¥¼ ë„£ìŠµë‹ˆë‹¤.
        4. ì„¸ì…˜ ì €ì¥ì†Œì—ì„œëŠ” ìœ ì €ì˜ ì •ë³´ì™€ëŠ” ê´€ë ¨ ì—†ëŠ” ë‚œìˆ˜ì¸ session-idë¥¼ ë°œê¸‰í•©ë‹ˆë‹¤.
        5. ì„œë²„ëŠ” ë¡œê·¸ì¸ ìš”ì²­ì˜ ì‘ë‹µìœ¼ë¡œ session-idë¥¼ ë‚´ì–´ì¤ë‹ˆë‹¤.
        6. í´ë¼ì´ì–¸íŠ¸ëŠ” ê·¸ session-idë¥¼ ì¿ í‚¤ë¼ëŠ” ì €ì¥ì†Œì— ë³´ê´€í•˜ê³  ì•ìœ¼ë¡œì˜ ìš”ì²­ë§ˆë‹¤ ì„¸ì…˜ì•„ì´ë””ë¥¼ ê°™ì´ ë³´ëƒ…ë‹ˆë‹¤. (ì£¼ë¡œ HTTP headerì— ë‹´ì•„ì„œ ë³´ëƒ…ë‹ˆë‹¤!)
        7. í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì—ì„œ ì¿ í‚¤ë¥¼ ë°œê²¬í–ˆë‹¤ë©´ ì„œë²„ëŠ” ì„¸ì…˜ ì €ì¥ì†Œì—ì„œ ì¿ í‚¤ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.
        8. ë§Œì•½ ìœ ì €ì •ë³´ë¥¼ ë°›ì•„ì™”ë‹¤ë©´ ì´ ì‚¬ìš©ìëŠ” ë¡œê·¸ì¸ì´ ë˜ì–´ìˆëŠ” ì‚¬ìš©ìê² ì£ ?
        9. ì´í›„ì—ëŠ” ë¡œê·¸ì¸ ëœ ìœ ì €ì— ë”°ë¥¸ ì‘ë‹µì„ ë‚´ì–´ì¤ë‹ˆë‹¤.

    ### JWT ê¸°ë°˜ ì¸ì¦
    ğŸ“Œ JWT(JSON Web Token)ë€ ì¸ì¦ì— í•„ìš”í•œ ì •ë³´ë“¤ì„ ì•”í˜¸í™”ì‹œí‚¨ í† í°ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. JWT ê¸°ë°˜ ì¸ì¦ì€ ì¿ í‚¤/ì„¸ì…˜ ë°©ì‹ê³¼ ìœ ì‚¬í•˜ê²Œ JWT í† í°(Access Token)ì„ HTTP í—¤ë”ì— ì‹¤ì–´ ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤.
    - **ì•„ë˜ëŠ” ê·¸ë¦¼ì˜ ê° ë²ˆí˜¸ì— ë”°ë¥¸ ì„¤ëª…ì…ë‹ˆë‹¤**
        1. ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
        2. ì„œë²„ëŠ” DBì˜ ìœ ì € í…Œì´ë¸”ì„ ë’¤ì ¸ì„œ ì•„ì´ë”” ë¹„ë°€ë²ˆí˜¸ë¥¼ ëŒ€ì¡°í•´ë´ì•¼ê² ì£ ?
        3. ì‹¤ì œ ìœ ì €í…Œì´ë¸”ì˜ ì •ë³´ì™€ ì¼ì¹˜í•œë‹¤ë©´ ì¸ì¦ì„ í†µê³¼í•œ ê²ƒìœ¼ë¡œ ë³´ê³  ìœ ì €ì˜ ì •ë³´ë¥¼ JWTë¡œ ì•”í˜¸í™” í•´ì„œ ë‚´ë³´ëƒ…ë‹ˆë‹¤.
        4. ì„œë²„ëŠ” ë¡œê·¸ì¸ ìš”ì²­ì˜ ì‘ë‹µìœ¼ë¡œ jwt í† í°ì„ ë‚´ì–´ì¤ë‹ˆë‹¤.
        5. í´ë¼ì´ì–¸íŠ¸ëŠ” ê·¸ í† í°ì„ ì €ì¥ì†Œì— ë³´ê´€í•˜ê³  ì•ìœ¼ë¡œì˜ ìš”ì²­ë§ˆë‹¤ í† í°ì„ ê°™ì´ ë³´ëƒ…ë‹ˆë‹¤.
        6. í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì—ì„œ í† í°ì„ ë°œê²¬í–ˆë‹¤ë©´ ì„œë²„ëŠ” í† í°ì„ ê²€ì¦í•©ë‹ˆë‹¤.
        7. ì´í›„ì—ëŠ” ë¡œê·¸ì¸ ëœ ìœ ì €ì— ë”°ë¥¸ ì‘ë‹µì„ ë‚´ì–´ì¤ë‹ˆë‹¤.

## 04. ì¿ í‚¤ì™€ ì„¸ì…˜ì´ë€ ë¬´ì—‡ì¼ê¹Œ?

- ì¿ í‚¤ì™€ ì„¸ì…˜
    ğŸ‘‰ ì¿ í‚¤ì™€ ì„¸ì…˜ ëª¨ë‘ HTTP ì— ìƒíƒœ ì •ë³´ë¥¼ ìœ ì§€(Stateful)í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì¦‰, ì¿ í‚¤ì™€ ì„¸ì…˜ì„ í†µí•´ ì„œë²„ì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ ë³„ë¡œ ì¸ì¦ ë° ì¸ê°€ë¥¼ í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.
    1. **ì¿ í‚¤**
        - í´ë¼ì´ì–¸íŠ¸ì— ì €ì¥ë  ëª©ì ìœ¼ë¡œ ìƒì„±í•œ ì‘ì€ ì •ë³´ë¥¼ ë‹´ì€ íŒŒì¼ ì…ë‹ˆë‹¤.
        - í´ë¼ì´ì–¸íŠ¸ì¸ ì›¹ ë¸Œë¼ìš°ì €ì— ì €ì¥ëœ 'ì¿ í‚¤' ë¥¼ í™•ì¸í•´ ë³´ì£ .
            - í¬ë¡¬ ë¸Œë¼ìš°ì € ê¸°ì¤€ìœ¼ë¡œ 'ê°œë°œìë„êµ¬' ë¥¼ ì—´ì–´ ë³´ì„¸ìš”.
            - Application - Storage - Cookies ì— ë„ë©”ì¸ ë³„ë¡œ ì €ì¥ë˜ì–´ ìˆëŠ”ê²Œ í™•ì¸ ë©ë‹ˆë‹¤.
        - êµ¬ì„±ìš”ì†Œ
            - **Name** (ì´ë¦„): ì¿ í‚¤ë¥¼ êµ¬ë³„í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” í‚¤ (ì¤‘ë³µë  ìˆ˜ ì—†ìŒ)
            - **Value** (ê°’): ì¿ í‚¤ì˜ ê°’
            - Domain (ë„ë©”ì¸): ì¿ í‚¤ê°€ ì €ì¥ëœ ë„ë©”ì¸
            - Path (ê²½ë¡œ): ì¿ í‚¤ê°€ ì‚¬ìš©ë˜ëŠ” ê²½ë¡œ
            - Expires (ë§Œë£Œê¸°í•œ): ì¿ í‚¤ì˜ ë§Œë£Œê¸°í•œ (ë§Œë£Œê¸°í•œ ì§€ë‚˜ë©´ ì‚­ì œë©ë‹ˆë‹¤.)

    2. **ì„¸ì…˜**
        - ì„œë²„ì—ì„œ ì¼ì •ì‹œê°„ ë™ì•ˆ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.
        - ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ë³„ë¡œ ìœ ì¼ë¬´ì´í•œ 'ì„¸ì…˜ ID' ë¥¼ ë¶€ì—¬í•œ í›„ í´ë¼ì´ì–¸íŠ¸ ë³„ í•„ìš”í•œ ì •ë³´ë¥¼ ì„œë²„ì— ì €ì¥í•©ë‹ˆë‹¤.
        - ì„œë²„ì—ì„œ ìƒì„±í•œ 'ì„¸ì…˜ ID' ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ì¿ í‚¤ê°’('ì„¸ì…˜ ì¿ í‚¤' ë¼ê³  ë¶€ë¦„)ìœ¼ë¡œ ì €ì¥ë˜ì–´ í´ë¼ì´ì–¸íŠ¸ ì‹ë³„ì— ì‚¬ìš©ë©ë‹ˆë‹¤.
        - ì„¸ì…˜ ë™ì‘ ë°©ì‹
    ìœ„ ê·¸ë¦¼ì—ì„œì™€ ê°™ì´ ì„œë²„ëŠ” ì„¸ì…˜ID ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ì…˜ì„ ìœ ì§€í•©ë‹ˆë‹¤.
    1. í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— 1ë²ˆ ìš”ì²­
    2. ì„œë²„ê°€ ì„¸ì…˜ID ë¥¼ ìƒì„±í•˜ê³ , ì¿ í‚¤ì— ë‹´ì•„ ì‘ë‹µ í—¤ë”ì— ì „ë‹¬
        1. ì„¸ì…˜ ID í˜•íƒœ: "SESSIONID = 12A345"
    3. í´ë¼ì´ì–¸íŠ¸ê°€ ì¿ í‚¤ì— ì„¸ì…˜IDë¥¼ ì €ì¥ ('ì„¸ì…˜ì¿ í‚¤')
    4. í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— 2ë²ˆ ìš”ì²­
        - ì¿ í‚¤ê°’ (ì„¸ì…˜ ID) í¬í•¨í•˜ì—¬ ìš”ì²­
    5. ì„œë²„ê°€ ì„¸ì…˜ID ë¥¼ í™•ì¸í•˜ê³ , 1ë²ˆ ìš”ì²­ê³¼ ê°™ì€ í´ë¼ì´ì–¸íŠ¸ì„ì„ ì¸ì§€

- ì¿ í‚¤ ë‹¤ë£¨ê¸°
    - ì¿ í‚¤ ìƒì„±

        ```java
        public static void addCookie(String cookieValue, HttpServletResponse res) {
            try {
                cookieValue = URLEncoder.encode(cookieValue, "utf-8").replaceAll("\\+", "%20"); // Cookie Value ì—ëŠ” ê³µë°±ì´ ë¶ˆê°€ëŠ¥í•´ì„œ encoding ì§„í–‰

                Cookie cookie = new Cookie(AUTHORIZATION_HEADER, cookieValue); // Name-Value
                cookie.setPath("/");
                cookie.setMaxAge(30 * 60);

                // Response ê°ì²´ì— Cookie ì¶”ê°€
                res.addCookie(cookie);
            } catch (UnsupportedEncodingException e) {
                throw new RuntimeException(e.getMessage());
            }
        }
        ```

        - `new Cookie(AUTHORIZATION_HEADER, cookieValue);`
            - Cookieì— ì €ì¥ë  Nameê³¼ Valueë¥¼ ìƒì„±ìë¡œ ë°›ëŠ” Cookie ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
        - `setPath("/")`, `setMaxAge(30 * 60)`
            - Pathì™€ ë§Œë£Œì‹œê°„ì„ ì§€ì •í•©ë‹ˆë‹¤.
        - HttpServletResponse ê°ì²´ì— ìƒì„±í•œ Cookie ê°ì²´ë¥¼ ì¶”ê°€í•˜ì—¬ ë¸Œë¼ìš°ì €ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
            - ì´ë ‡ê²Œ ë°˜í™˜ëœ CookieëŠ” ë¸Œë¼ìš°ì €ì˜ Cookie ì €ì¥ì†Œì— ì €ì¥ë©ë‹ˆë‹¤.
        - Cookie ìƒì„±ì€ ë²”ìš©ì ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— static ë©”ì„œë“œë¡œ ì„ ì–¸í•©ë‹ˆë‹¤.

    - ì¿ í‚¤ ì½ê¸°

        ```java
        @GetMapping("/get-cookie")
        public String getCookie(@CookieValue(AUTHORIZATION_HEADER) String value) {
            System.out.println("value = " + value);

            return "getCookie : " + value;
        }
        ```

        - `@CookieValue("Cookieì˜ Name")`
            - Cookieì˜ Name ì •ë³´ë¥¼ ì „ë‹¬í•´ì£¼ë©´ í•´ë‹¹ ì •ë³´ë¥¼ í† ëŒ€ë¡œ Cookieì˜ Valueë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

    - [ì½”ë“œ ìŠ¤ë‹ˆí«] auth > AuthController

        ```java
        package com.sparta.springauth.auth;

        import jakarta.servlet.http.Cookie;
        import jakarta.servlet.http.HttpServletResponse;
        import org.springframework.web.bind.annotation.CookieValue;
        import org.springframework.web.bind.annotation.GetMapping;
        import org.springframework.web.bind.annotation.RequestMapping;
        import org.springframework.web.bind.annotation.RestController;

        import java.io.UnsupportedEncodingException;
        import java.net.URLEncoder;

        @RestController
        @RequestMapping("/api")
        public class AuthController {

            public static final String AUTHORIZATION_HEADER = "Authorization";

            @GetMapping("/create-cookie")
            public String createCookie(HttpServletResponse res) {
                addCookie("Robbie Auth", res);

                return "createCookie";
            }

            @GetMapping("/get-cookie")
            public String getCookie(@CookieValue(AUTHORIZATION_HEADER) String value) {
                System.out.println("value = " + value);

                return "getCookie : " + value;
            }

            public static void addCookie(String cookieValue, HttpServletResponse res) {
                try {
                    cookieValue = URLEncoder.encode(cookieValue, "utf-8").replaceAll("\\+", "%20"); // Cookie Value ì—ëŠ” ê³µë°±ì´ ë¶ˆê°€ëŠ¥í•´ì„œ encoding ì§„í–‰

                    Cookie cookie = new Cookie(AUTHORIZATION_HEADER, cookieValue); // Name-Value
                    cookie.setPath("/");
                    cookie.setMaxAge(30 * 60);

                    // Response ê°ì²´ì— Cookie ì¶”ê°€
                    res.addCookie(cookie);
                } catch (UnsupportedEncodingException e) {
                    throw new RuntimeException(e.getMessage());
                }
            }
        }
        ```

- ì„¸ì…˜ ë‹¤ë£¨ê¸°
    - Servletì—ì„œëŠ” ìœ ì¼ë¬´ì´í•œ 'ì„¸ì…˜ ID'ë¥¼ ê°„í¸í•˜ê²Œ ë§Œë“¤ìˆ˜ ìˆëŠ” HttpSessionì„ ì œê³µ í•´ì¤ë‹ˆë‹¤.
    - HttpSession ìƒì„±

        ```java
        @GetMapping("/create-session")
        public String createSession(HttpServletRequest req) {
            // ì„¸ì…˜ì´ ì¡´ì¬í•  ê²½ìš° ì„¸ì…˜ ë°˜í™˜, ì—†ì„ ê²½ìš° ìƒˆë¡œìš´ ì„¸ì…˜ì„ ìƒì„±í•œ í›„ ë°˜í™˜
            HttpSession session = req.getSession(true);

            // ì„¸ì…˜ì— ì €ì¥ë  ì •ë³´ Name - Value ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
            session.setAttribute(AUTHORIZATION_HEADER, "Robbie Auth");

            return "createSession";
        }
        ```

        - [ì½”ë“œ ìŠ¤ë‹ˆí«] createSession

            ```java
            @GetMapping("/create-session")
            public String createSession(HttpServletRequest req) {
                // ì„¸ì…˜ì´ ì¡´ì¬í•  ê²½ìš° ì„¸ì…˜ ë°˜í™˜, ì—†ì„ ê²½ìš° ìƒˆë¡œìš´ ì„¸ì…˜ì„ ìƒì„±í•œ í›„ ë°˜í™˜
                HttpSession session = req.getSession(true);

                // ì„¸ì…˜ì— ì €ì¥ë  ì •ë³´ Name - Value ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
                session.setAttribute(AUTHORIZATION_HEADER, "Robbie Auth");

                return "createSession";
            }
            ```

        - HttpServletRequestë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ì…˜ì„ ìƒì„± ë° ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        - `req.getSession(true)`
            - ì„¸ì…˜ì´ ì¡´ì¬í•  ê²½ìš° ì„¸ì…˜ì„ ë°˜í™˜í•˜ê³  ì—†ì„ ê²½ìš° ìƒˆë¡œìš´ ì„¸ì…˜ì„ ìƒì„±í•©ë‹ˆë‹¤.
        - ì„¸ì…˜ì— ì €ì¥í•  ì •ë³´ë¥¼ Name-Value í˜•ì‹ìœ¼ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.
        - ë°˜í™˜ëœ ì„¸ì…˜ì€ ë¸Œë¼ìš°ì € Cookie ì €ì¥ì†Œì— â€˜JSESSIONIDâ€™ë¼ëŠ” Nameìœ¼ë¡œ Valueì— ì €ì¥ë©ë‹ˆë‹¤.

    - HttpSession ì½ê¸°

        ```java
        @GetMapping("/get-session")
        public String getSession(HttpServletRequest req) {
            // ì„¸ì…˜ì´ ì¡´ì¬í•  ê²½ìš° ì„¸ì…˜ ë°˜í™˜, ì—†ì„ ê²½ìš° null ë°˜í™˜
            HttpSession session = req.getSession(false);

            String value = (String) session.getAttribute(AUTHORIZATION_HEADER); // ê°€ì ¸ì˜¨ ì„¸ì…˜ì— ì €ì¥ëœ Value ë¥¼ Name ì„ ì‚¬ìš©í•˜ì—¬ ê°€ì ¸ì˜µë‹ˆë‹¤.
            System.out.println("value = " + value);

            return "getSession : " + value;
        }
        ```

        - [ì½”ë“œ ìŠ¤ë‹ˆí«] getSession

            ```java
            @GetMapping("/get-session")
            public String getSession(HttpServletRequest req) {
                // ì„¸ì…˜ì´ ì¡´ì¬í•  ê²½ìš° ì„¸ì…˜ ë°˜í™˜, ì—†ì„ ê²½ìš° null ë°˜í™˜
                HttpSession session = req.getSession(false);

                String value = (String) session.getAttribute(AUTHORIZATION_HEADER); // ê°€ì ¸ì˜¨ ì„¸ì…˜ì— ì €ì¥ëœ Value ë¥¼ Name ì„ ì‚¬ìš©í•˜ì—¬ ê°€ì ¸ì˜µë‹ˆë‹¤.
                System.out.println("value = " + value);

                return "getSession : " + value;
            }
            ```

        - `req.getSession(false)`
            - ì„¸ì…˜ì´ ì¡´ì¬í•  ê²½ìš° ì„¸ì…˜ì„ ë°˜í™˜í•˜ê³  ì—†ì„ ê²½ìš° nullì„ ë°˜í™˜í•©ë‹ˆë‹¤.
        - `session.getAttribute(â€ì„¸ì…˜ì— ì €ì¥ëœ ì •ë³´ Nameâ€)`
            - Nameì„ ì‚¬ìš©í•˜ì—¬ ì„¸ì…˜ì— ì €ì¥ëœ Valueë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.