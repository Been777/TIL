# ë‚´ì¼ë°°ì›€ìº í”„ 240515 TIL
Java 21ì¼ì°¨
ê°œì¸ ê³¼ì œ, Spring MVC(15. HTTP ë°ì´í„° ê°ì²´ë¡œ ì²˜ë¦¬), ë©”ëª¨ì¥, Databaseì™€ SQL
----------------------------------------------------------------------------------------

## 15. HTTP ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•
- @ModelAttribute
    - form íƒœê·¸ POST
        ğŸŒ POST http://localhost:8080/hello/request/form/model

            // [Request sample]
            // POST http://localhost:8080/hello/request/form/model
            // Header
            //  Content type: application/x-www-form-urlencoded
            // Body
            //  name=Robbie&age=95
            @PostMapping("/form/model")
            @ResponseBody
            public String helloRequestBodyForm(@ModelAttribute Star star) {
                return String.format("Hello, @ModelAttribute.<br> (name = %s, age = %d) ", star.name, star.age);
            }

        - HTMLì˜ form íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ POST ë°©ì‹ìœ¼ë¡œ HTTP ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        - ì´ë•Œ í•´ë‹¹ ë°ì´í„°ëŠ” HTTP Bodyì— `name=Robbie&age=95` í˜•íƒœë¡œ ë‹´ê²¨ì ¸ì„œ ì„œë²„ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.
        - í•´ë‹¹ ë°ì´í„°ë¥¼ Javaì˜ ê°ì²´ í˜•íƒœë¡œ ë°›ëŠ” ë°©ë²•ì€ @ModelAttribute ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•œ í›„ Body ë°ì´í„°ë¥¼ `Star star` ë°›ì•„ì˜¬ ê°ì²´ë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤.

    - Query String ë°©ì‹
        ğŸŒ GET http://localhost:8080/hello/request/form/param/model?name=Robbie&age=95

            // [Request sample]
            // GET http://localhost:8080/hello/request/form/param/model?name=Robbie&age=95
            @GetMapping("/form/param/model")
            @ResponseBody
            public String helloRequestParam(@ModelAttribute Star star) {
                return String.format("Hello, @ModelAttribute.<br> (name = %s, age = %d) ", star.name, star.age);
            }

        - `?name=Robbie&age=95` ì²˜ëŸ¼ ë°ì´í„°ê°€ ë‘ ê°œë§Œ ìˆë‹¤ë©´ ê´œì°®ì§€ë§Œ ì—¬ëŸ¬ ê°œ ìˆë‹¤ë©´ @RequestParam ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ í•˜ë‚˜ ì”© ë°›ì•„ì˜¤ê¸° í˜ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        - ì´ë•Œ @ModelAttribute ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ Javaì˜ ê°ì²´ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            - íŒŒë¼ë¯¸í„°ì— ì„ ì–¸í•œ `Star` ê°ì²´ê°€ ìƒì„±ë˜ê³ , ì˜¤ë²„ë¡œë”©ëœ ìƒì„±ì í˜¹ì€ Setter ë©”ì„œë“œë¥¼ í†µí•´ ìš”ì²­ëœ `name & age` ì˜ ê°’ì´ ë‹´ê²¨ì§‘ë‹ˆë‹¤.
        âš ï¸ @ModelAttributeëŠ” ìƒëµì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
        ì´ë•Œ, ìƒê°í•´ë³¼ ë¬¸ì œê°€ìˆìŠµë‹ˆë‹¤!
        Springì—ì„œëŠ” @ModelAttributeë¿ë§Œ ì•„ë‹ˆë¼ @RequestParamë„ ìƒëµì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
        ê·¸ë ‡ë‹¤ë©´ Springì€ ì´ë¥¼ ì–´ë–»ê²Œ êµ¬ë¶„í• ê¹Œìš”?
        ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ìë©´ Springì€ í•´ë‹¹ íŒŒë¼ë¯¸í„°(ë§¤ê°œë³€ìˆ˜)ê°€ SimpleValueTypeì´ë¼ë©´ @RequestParamìœ¼ë¡œ ê°„ì£¼í•˜ê³  ì•„ë‹ˆë¼ë©´ @ModelAttributeê°€ ìƒëµë˜ì–´ìˆë‹¤ íŒë‹¨í•©ë‹ˆë‹¤.
         SimpleValueTypeì€ ì›ì‹œíƒ€ì…(int), Wrapperíƒ€ì…(Integer), Dateë“±ì˜ íƒ€ì…ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

- @RequestBody
    - HTTP Bodyì— JSON ë°ì´í„°ë¥¼ ë‹´ì•„ ì„œë²„ì— ì „ë‹¬í•  ë•Œ í•´ë‹¹ Body ë°ì´í„°ë¥¼ Javaì˜ ê°ì²´ë¡œ ì „ë‹¬ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - Body JSON ë°ì´í„°
        ğŸŒ POST http://localhost:8080/hello/request/form/json

            // [Request sample]
            // POST http://localhost:8080/hello/request/form/json
            // Header
            //  Content type: application/json
            // Body
            //  {"name":"Robbie","age":"95"}
            @PostMapping("/form/json")
            @ResponseBody
            public String helloPostRequestJson(@RequestBody Star star) {
                return String.format("Hello, @RequestBody.<br> (name = %s, age = %d) ", star.name, star.age);
            }

        - HTTP Bodyì— `{"name":"Robbie","age":"95"}`  `JSON` í˜•íƒœë¡œ ë°ì´í„°ê°€ ì„œë²„ì— ì „ë‹¬ë˜ì—ˆì„ ë•Œ @RequestBody ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ê°ì²´ í˜•íƒœë¡œ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        âš ï¸ ë°ì´í„°ë¥¼ Javaì˜ ê°ì²´ë¡œ ë°›ì•„ì˜¬ ë•Œ ì£¼ì˜í•  ì ì´ ìˆìŠµë‹ˆë‹¤.
        - í•´ë‹¹ ê°ì²´ì˜ í•„ë“œì— ë°ì´í„°ë¥¼ ë„£ì–´ì£¼ê¸° ìœ„í•´ set or get ë©”ì„œë“œ ë˜ëŠ” ì˜¤ë²„ë¡œë”©ëœ ìƒì„±ìê°€ í•„ìš”í•©ë‹ˆë‹¤.
        - ì˜ˆë¥¼ ë“¤ì–´ @ModelAttribute ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ë•Œ í•´ë‹¹ ê°ì²´ì— set ë©”ì„œë“œ í˜¹ì€ ì˜¤ë²„ë¡œë”©ëœ ìƒì„±ìê°€ ì—†ë‹¤ë©´ ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ í•´ë‹¹ ê°ì²´ì˜ í•„ë“œì— ë‹´ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
        - ì´ì²˜ëŸ¼ ê°ì²´ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ë•Œ ë°ì´í„°ê°€ ì œëŒ€ë¡œ ë“¤ì–´ì˜¤ì§€ ì•ŠëŠ”ë‹¤ë©´ ìš°ì„  í•´ë‹¹ ê°ì²´ì˜ set or get ë©”ì„œë“œ ë˜ëŠ” ì˜¤ë²„ë¡œë”©ëœ ìƒì„±ìì˜ ìœ ë¬´ë¥¼ í™•ì¸í•˜ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤.
        </aside>


## 16. ë©”ëª¨ì¥ í”„ë¡œì íŠ¸ ì„¤ê³„

- í”„ë¡œì íŠ¸ ìƒì„±
    - í”„ë¡œì íŠ¸ ì¤€ë¹„í•˜ê¸°
        1. IntelliJë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
        2. New Projectë¥¼ í´ë¦­í•©ë‹ˆë‹¤.
        3. ì™¼ìª½ ë©”ë‰´ì—ì„œ "Spring Initializrâ€ë¥¼ í´ë¦­í•˜ê³  ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•©ë‹ˆë‹¤.
        4.  ğŸš’**[ì¤‘ìš”] ê¼­ ë‹¤ìŒ ì‚¬í•­ì„ í™•ì¸í•´ì£¼ì„¸ìš”.**
            - Name: memo
            - **Language: Java**
            - **Build system: Gradle - Groovy**
            - Group: com.sparta
            - **JDK: 17**
            - í”„ë¡œì íŠ¸ ê²½ë¡œ(Location)ëŠ” ììœ ë¡­ê²Œ ì„¤ì •í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
        5. Nextë¥¼ í´ë¦­í•©ë‹ˆë‹¤.
        6. Dependenciesë¥¼ ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì´ ì¶”ê°€í•´ì£¼ê³  Createë¥¼ í´ë¦­í•©ë‹ˆë‹¤.

- ë©”ëª¨ì¥ ê¸°ëŠ¥ ì„¤ê³„
    1. ì ‘ì† í•˜ìë§ˆì ë©”ëª¨ ì „ì²´ ëª©ë¡ ì¡°íšŒí•˜ê¸°
        1. GET API ì‚¬ìš©í•´ì„œ ë©”ëª¨ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
    2. ë©”ëª¨ ìƒì„±í•˜ê¸°
        1. POST API ì‚¬ìš©í•´ì„œ ë©”ëª¨ ì‹ ê·œ ìƒì„±í•˜ê¸°
        2. ìƒì„±ëœ ë©”ëª¨ ë°˜í™˜
    3. ë©”ëª¨ ë³€ê²½í•˜ê¸°
        1. PUT API ì‚¬ìš©í•´ì„œ ë©”ëª¨ ë‚´ìš© ë³€ê²½í•˜ê¸°
        2. ì‚¬ìš©ìê°€ í´ë¦­í•œ ë©”ëª¨ê°€ DBì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸°
        3. í•´ë‹¹ ë©”ëª¨ ë‚´ìš© ë³€ê²½
    4. ë©”ëª¨ ì‚­ì œí•˜ê¸°
        1. DELETE API ì‚¬ìš©í•´ì„œ ë©”ëª¨ ì‚­ì œí•˜ê¸°
        2. ì‚¬ìš©ìê°€ ì‚­ì œí•˜ë ¤ëŠ” ë©”ëª¨ê°€ DBì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸°
        3. DBì—ì„œ í•´ë‹¹ ë©”ëª¨ ì‚­ì œ

- API í…Œì´ë¸”
    [ë©”ëª¨ì¥ API](https://www.notion.so/8dc2232b2a354d988cce0463276200f1?pvs=21)


## 17. Create, Read êµ¬í˜„í•˜ê¸°
- DTOë€ ë¬´ì—‡ì¼ê¹Œ?
    - ì´ë¦„ì—ì„œë„ ì•Œ ìˆ˜ ìˆë“¯ì´ DTO(Data Transfer Object)ëŠ” ë°ì´í„° ì „ì†¡ ë° ì´ë™ì„ ìœ„í•´ ìƒì„±ë˜ëŠ” ê°ì²´ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
    - Clientì—ì„œ ë³´ë‚´ì˜¤ëŠ” ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
    - ë˜í•œ ì„œë²„ì˜ ê³„ì¸µê°„ì˜ ì´ë™ì—ë„ ì‚¬ìš©ë©ë‹ˆë‹¤.
        - ì§€ê¸ˆì€ ê³„ì¸µê°„ì˜ ì´ë™ì´ë¼ëŠ” ìš©ì–´ì— ëŒ€í•´  ì˜ ì´í•´ê°€ ë˜ì§€ ì•Šê² ì§€ë§Œ ì´í›„ ê°•ì˜ë¥¼ í†µí•´ ìì—°ìŠ¤ëŸ½ê²Œ ì´í•´ê°€ ë˜ì‹¤ê²ë‹ˆë‹¤.
    - ê·¸ë¦¬ê³  DBì™€ì˜ ì†Œí†µì„ ë‹´ë‹¹í•˜ëŠ” Java í´ë˜ìŠ¤ë¥¼ ê·¸ëŒ€ë¡œ Clientì— ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ DTOë¡œ í•œë²ˆ ë³€í™˜í•œ í›„ ë°˜í™˜í•  ë•Œë„ ì‚¬ìš©ë©ë‹ˆë‹¤.
        - ë§ˆì°¬ê°€ì§€ë¡œ ì´í›„ ê°•ì˜ë¥¼ í†µí•´ ìì—°ìŠ¤ëŸ½ê²Œ í•™ìŠµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    ğŸ“Œ Requestì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ê°ì²´ëŠ” RequestDto, Responseë¥¼ í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ê°ì²´ëŠ” ResponseDtoë¼ëŠ” ì´ë¦„ì„ ë¶™ì—¬ DTO í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - ì ˆëŒ€ì ì¸ ê·œì¹™ì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì¡°ì§ì— ë”°ë¼ ê·œì¹™ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - ê°•ì˜ì—ì„œëŠ” í•´ë‹¹ ê·œì¹™ì— ë”°ë¼ DTO í´ë˜ìŠ¤ë¥¼ ì œì‘í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

- Create êµ¬í˜„
    1. ë©”ëª¨ ë°ì´í„°ë¥¼ ì €ì¥í•  Memo í´ë˜ìŠ¤ ìƒì„±
        - [ì½”ë“œ ìŠ¤ë‹ˆí«] entity > Memo
            package com.sparta.memo.entity;

            import lombok.Getter;
            import lombok.NoArgsConstructor;
            import lombok.Setter;

            @Getter
            @Setter
            @NoArgsConstructor
            public class Memo {
                private Long id;
                private String username;
                private String contents;
            }

    2. ë©”ëª¨ ìƒì„±í•˜ê¸° APIë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” Controllerì™€ ë©”ì„œë“œ ìƒì„±

        @RestController
        @RequestMapping("/api")
        public class MemoController {

            @PostMapping("/memos")
            public MemoResponseDto createMemo(@RequestBody MemoRequestDto requestDto) {
                return null;
            }

        }

    3. Clientì— ë°ì´í„°ë¥¼ ë°˜í™˜í•  ë•Œ ì‚¬ìš©í•  MemoResponseDto í´ë˜ìŠ¤ ìƒì„±
        - [ì½”ë“œ ìŠ¤ë‹ˆí«] MemoResponseDto
            package com.sparta.memo.dto;

            import lombok.Getter;

            @Getter
            public class MemoResponseDto {
                private Long id;
                private String username;
                private String contents;
            }

    4. Clientì˜ ìš”ì²­ ë°ì´í„°ë¥¼ ë°›ì•„ì¤„ MemoRequestDto í´ë˜ìŠ¤ ìƒì„±
        - [ì½”ë“œ ìŠ¤ë‹ˆí«] MemoRequestDto
            package com.sparta.memo.dto;

            import lombok.Getter;

            @Getter
            public class MemoRequestDto {
                private String username;
                private String contents;
            }

    5. DBì™€ ì—°ê²°ì„ í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ë©”ëª¨ ë°ì´í„°ë¥¼ ì €ì¥í•  Java ì»¬ë ‰ì…˜ ìƒì„±

    private final Map<Long, Memo> memoList = new HashMap<>();

    1. ë©”ëª¨ ìƒì„± ë¡œì§ ì‘ì„±

        @PostMapping("/memos")
        public MemoResponseDto createMemo(@RequestBody MemoRequestDto requestDto) {
            // RequestDto -> Entity
            Memo memo = new Memo(requestDto);

            // Memo Max ID Check
            Long maxId = memoList.size() > 0 ? Collections.max(memoList.keySet()) + 1 : 1;
            memo.setId(maxId);

            // DB ì €ì¥
            memoList.put(memo.getId(), memo);

            // Entity -> ResponseDto
            MemoResponseDto memoResponseDto = new MemoResponseDto(memo);

            return memoResponseDto;
        }

- Read êµ¬í˜„

    @GetMapping("/memos")
    public List<MemoResponseDto> getMemos() {
        // Map To List
        List<MemoResponseDto> responseList = memoList.values().stream()
                .map(MemoResponseDto::new).toList();

        return responseList;
    }
    - DB ì—­í• ì„ í•˜ëŠ” memoListë¥¼ ì¡°íšŒí•˜ì—¬ List<MemoResponseDto>ë¡œ ë³€í™˜í•œ í›„ ë°˜í™˜í•©ë‹ˆë‹¤.

- êµ¬í˜„ ì™„ë£Œ ì½”ë“œ
    - [ì½”ë“œ ìŠ¤ë‹ˆí«] MemoController
        package com.sparta.memo.controller;

        import com.sparta.memo.dto.MemoRequestDto;
        import com.sparta.memo.dto.MemoResponseDto;
        import com.sparta.memo.entity.Memo;
        import org.springframework.web.bind.annotation.*;

        import java.util.Collections;
        import java.util.HashMap;
        import java.util.List;
        import java.util.Map;

        @RestController
        @RequestMapping("/api")
        public class MemoController {

            private final Map<Long, Memo> memoList = new HashMap<>();

            @PostMapping("/memos")
            public MemoResponseDto createMemo(@RequestBody MemoRequestDto requestDto) {
                // RequestDto -> Entity
                Memo memo = new Memo(requestDto);

                // Memo Max ID Check
                Long maxId = memoList.size() > 0 ? Collections.max(memoList.keySet()) + 1 : 1;
                memo.setId(maxId);

                // DB ì €ì¥
                memoList.put(memo.getId(), memo);

                // Entity -> ResponseDto
                MemoResponseDto memoResponseDto = new MemoResponseDto(memo);

                return memoResponseDto;
            }

            @GetMapping("/memos")
            public List<MemoResponseDto> getMemos() {
                // Map To List
                List<MemoResponseDto> responseList = memoList.values().stream()
                        .map(MemoResponseDto::new).toList();

                return responseList;
            }
        }



## 18. Update, Delete êµ¬í˜„í•˜ê¸°

- Update êµ¬í˜„
    @PutMapping("/memos/{id}")
    public Long updateMemo(@PathVariable Long id, @RequestBody MemoRequestDto requestDto) {
        // í•´ë‹¹ ë©”ëª¨ê°€ DBì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
        if(memoList.containsKey(id)) {
    				// í•´ë‹¹ ë©”ëª¨ ê°€ì ¸ì˜¤ê¸°
            Memo memo = memoList.get(id);

            // memo ìˆ˜ì •
            memo.update(requestDto);
            return memo.getId();
        } else {
            throw new IllegalArgumentException("ì„ íƒí•œ ë©”ëª¨ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
    }

    - Memo í´ë˜ìŠ¤ì— ìˆ˜ì •í•˜ëŠ” ê¸°ëŠ¥ì˜ ë©”ì„œë“œ update ìƒì„±

        public void update(MemoRequestDto requestDto) {
            this.username = requestDto.getUsername();
            this.contents = requestDto.getContents();
        }

- Delete êµ¬í˜„

    @DeleteMapping("/memos/{id}")
    public Long deleteMemo(@PathVariable Long id) {
        // í•´ë‹¹ ë©”ëª¨ê°€ DBì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
        if(memoList.containsKey(id)) {
            // í•´ë‹¹ ë©”ëª¨ ì‚­ì œí•˜ê¸°
            memoList.remove(id);
            return id;
        } else {
            throw new IllegalArgumentException("ì„ íƒí•œ ë©”ëª¨ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
    }

- êµ¬í˜„ ì™„ë£Œ ì½”ë“œ
    - [ì½”ë“œ ìŠ¤ë‹ˆí«] MemoController
        package com.sparta.memo.controller;

        import com.sparta.memo.dto.MemoRequestDto;
        import com.sparta.memo.dto.MemoResponseDto;
        import com.sparta.memo.entity.Memo;
        import org.springframework.web.bind.annotation.*;

        import java.util.Collections;
        import java.util.HashMap;
        import java.util.List;
        import java.util.Map;

        @RestController
        @RequestMapping("/api")
        public class MemoController {

            private final Map<Long, Memo> memoList = new HashMap<>();

            @PostMapping("/memos")
            public MemoResponseDto createMemo(@RequestBody MemoRequestDto requestDto) {
                // RequestDto -> Entity
                Memo memo = new Memo(requestDto);

                // Memo Max ID Check
                Long maxId = memoList.size() > 0 ? Collections.max(memoList.keySet()) + 1 : 1;
                memo.setId(maxId);

                // DB ì €ì¥
                memoList.put(memo.getId(), memo);

                // Entity -> ResponseDto
                MemoResponseDto memoResponseDto = new MemoResponseDto(memo);

                return memoResponseDto;
            }

            @GetMapping("/memos")
            public List<MemoResponseDto> getMemos() {
                // Map To List
                List<MemoResponseDto> responseList = memoList.values().stream()
                        .map(MemoResponseDto::new).toList();

                return responseList;
            }

            @PutMapping("/memos/{id}")
            public Long updateMemo(@PathVariable Long id, @RequestBody MemoRequestDto requestDto) {
                // í•´ë‹¹ ë©”ëª¨ê°€ DBì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
                if(memoList.containsKey(id)) {
                    // í•´ë‹¹ ë©”ëª¨ ê°€ì ¸ì˜¤ê¸°
                    Memo memo = memoList.get(id);

                    // memo ìˆ˜ì •
                    memo.update(requestDto);
                    return memo.getId();
                } else {
                    throw new IllegalArgumentException("ì„ íƒí•œ ë©”ëª¨ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                }
            }

            @DeleteMapping("/memos/{id}")
            public Long deleteMemo(@PathVariable Long id) {
                // í•´ë‹¹ ë©”ëª¨ê°€ DBì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
                if(memoList.containsKey(id)) {
                    // í•´ë‹¹ ë©”ëª¨ ì‚­ì œí•˜ê¸°
                    memoList.remove(id);
                    return id;
                } else {
                    throw new IllegalArgumentException("ì„ íƒí•œ ë©”ëª¨ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                }
            }
        }



## 19. Database
- ê°œë…
    ğŸ’¡ Databaseë¥¼ í•œ ë§ˆë””ë¡œ ì •ì˜í•˜ë©´ â€˜***ë°ì´í„°ì˜ ì§‘í•©***â€™ ****ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    ****DBëŠ” ìš°ë¦¬ê°€ ë§¤ì¼ ì‚¬ìš©í•˜ëŠ” ì¹´í†¡ ë©”ì‹œì§€, ì¸ìŠ¤íƒ€ê·¸ë¨ì˜ ì‚¬ì§„ë“±ì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•´ ì¤ë‹ˆë‹¤.

- ìš©ì–´ ì •ë¦¬
    ğŸ’¡ DBMS
    - DBMS ëŠ” â€˜***Database Management System***â€™ ì˜ ì•½ìë¡œ Databaseë¥¼ ê´€ë¦¬í•˜ê³  ìš´ì˜í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.

    ğŸ’¡ RDBMS
    - RDBMSëŠ” â€˜***Relational DBMS***â€™ì˜ ì•½ìë¡œ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¼ê³  ë¶ˆë¦½ë‹ˆë‹¤.
    - RDBMSëŠ” í…Œì´ë¸”(table)ì´ë¼ëŠ” ìµœì†Œ ë‹¨ìœ„ë¡œ êµ¬ì„±ë˜ë©°, ì´ í…Œì´ë¸”ì€ ì—´(column)ê³¼ í–‰(row)ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.
    - í…Œì´ë¸”ê°„ FK(Foreign Key)ë¥¼ í†µí•´ ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ì¡°í•©í•´ì„œ í•¨ê»˜ ë³¼ìˆ˜ ìˆë‹¤ë¼ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.

- RDBMSì˜ ì¢…ë¥˜
    ğŸ’¡ ê° ì œí’ˆ ê°„ ì°¨ì´ê°€ í¬ì§€ ì•Šì•„ì„œ ì‚¬ì‹¤ ì–´ë–¤ ê±¸ ì‚¬ìš©í•˜ë“  ì¢‹ìŠµë‹ˆë‹¤. ìœ ë£Œì¸ Oracleì„ ì œì™¸í•˜ê³  ë³´í†µ MySQL, PostgreSQL ì¤‘ì—ì„œ ë§ì´ ê³ ë¥´ëŠ” í¸ì¸ë°, ìš°ë¦¬ëŠ” MySQLì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.
    - MySQL
        ğŸ’¡ MySQL
        - MySQLì€ ìš°ë¦¬ê°€ ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•  ë•Œ ì‚¬ìš©í•  ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤.
        - AWS RDS ë¼ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•´ ë¶™ì—¬ë³¼ ì˜ˆì •ì…ë‹ˆë‹¤.
        - Springê³¼ ê¶í•©ì´ ì¢‹ì•„ì„œ ë§ì€ íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.



## 20. SQL
- ê°œë…
    ğŸ’¡ SQLì€ â€˜***Structured Query Language***â€™ ì˜ ì•½ìë¡œ RDBMSì—ì„œ ì‚¬ìš©ë˜ëŠ” ì–¸ì–´ì…ë‹ˆë‹¤.
    ìˆ˜ ë§ì€ ì •ë³´ë¥¼ Databaseì—ì„œ ì¡°ì‘í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ” SQL ì–¸ì–´ë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.
    - êµ­ì œí‘œì¤€í™”ê¸°êµ¬ì—ì„œ SQLì— ëŒ€í•œ í‘œì¤€ì„ ì •í•´ì„œ ë°œí‘œí•˜ê³  ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œâ€¦
    - DBMSë¥¼ ë§Œë“œëŠ” íšŒì‚¬ê°€ ì—¬ëŸ¬ ê³³ì´ê¸° ë•Œë¬¸ì— DBMS ë§ˆë‹¤ í‘œì¤€ SQLì„ ì¤€ìˆ˜í•˜ë˜, ê° ì œí’ˆì˜ íŠ¹ì„±ì„ ë°˜ì˜í•˜ê¸° ìœ„í•œ ì•½ê°„ì˜ ì°¨ì´ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.

- DDL
    ğŸ’¡ â€˜***Data Definition Languageâ€™*** ì˜ ì•½ìë¡œ í…Œì´ë¸”ì´ë‚˜ ê´€ê³„ì˜ êµ¬ì¡°ë¥¼ ìƒì„±í•˜ëŠ”ë° ì‚¬ìš©í•©ë‹ˆë‹¤
    - CREATE : ìƒˆë¡œìš´ ë°ì´í„°ë² ì´ìŠ¤ ë° í…Œì´ë¸”ì„ ìƒì„±í•´ ì¤ë‹ˆë‹¤.

        CREATE DATABASE ë°ì´í„°ë² ì´ìŠ¤ì´ë¦„;
        CREATE TABLE í…Œì´ë¸”ì´ë¦„
        (
        		í•„ë“œì´ë¦„1 í•„ë“œíƒ€ì…1,
            í•„ë“œì´ë¦„2 í•„ë“œíƒ€ì…2,
            ...
        );

    - ALTER : ë°ì´í„°ë² ì´ìŠ¤ì™€ í…Œì´ë¸”ì˜ ë‚´ìš©ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        ALTER TABLE í…Œì´ë¸”ì´ë¦„ ADD í•„ë“œì´ë¦„ í•„ë“œíƒ€ì…;
        ALTER TABLE í…Œì´ë¸”ì´ë¦„ DROP í•„ë“œì´ë¦„;
        ALTER TABLE í…Œì´ë¸”ì´ë¦„ MODIFY COLUMN í•„ë“œì´ë¦„ í•„ë“œíƒ€ì…;

    - DROP : ë°ì´í„°ë² ì´ìŠ¤ì™€ í…Œì´ë¸”ì„ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°ì´í„° ë° í…Œì´ë¸” ì „ì²´ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
        DROP DATABASE ë°ì´í„°ë² ì´ìŠ¤ì´ë¦„;
        DROP TABLE í…Œì´ë¸”ì´ë¦„;

    - TRUNCATE : ë°ì´í„°ë² ì´ìŠ¤ì™€ í…Œì´ë¸”ì„ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìµœì´ˆ í…Œì´ë¸”ì´ ë§Œë“¤ì–´ì¡Œë˜ ìƒíƒœ ì¦‰, ì»¬ëŸ¼ê°’ë§Œ ë‚¨ê¹ë‹ˆë‹¤.
        TRUNCATE DATABASE ë°ì´í„°ë² ì´ìŠ¤ì´ë¦„;
        TRUNCATE TABLE í…Œì´ë¸”ì´ë¦„;

- DCL
    ğŸ’¡ â€˜***Data Control Language*â€™** ì˜ ì•½ìë¡œ ë°ì´í„°ì˜ ì‚¬ìš© ê¶Œí•œì„ ê´€ë¦¬í•˜ëŠ”ë° ì‚¬ìš©í•©ë‹ˆë‹¤.
    - GRANT : ì‚¬ìš©ì ë˜ëŠ” ROLEì— ëŒ€í•´ ê¶Œí•œì„ ë¶€ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        GRANT [ê°ì²´ê¶Œí•œëª…] (ì»¬ëŸ¼)
        ON [ê°ì²´ëª…]
        TO { ìœ ì €ëª… | ë¡¤ëª… | PUBLC} [WITH GRANT OPTION];

        //ex
        GRANT SELECT ,INSERT
        ON mp
        TO scott WITH GRANT OPTION;

    - REVOKE : ì‚¬ìš©ì ë˜ëŠ” ROLEì— ë¶€ì—¬í•œ ê¶Œí•œì„ íšŒìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        REVOKE { ê¶Œí•œëª… [, ê¶Œí•œëª…...] ALL}
        ON ê°ì²´ëª…
        FROM {ìœ ì €ëª… [, ìœ ì €ëª…...] | ë¡¤ëª…(ROLE) | PUBLIC}
        [CASCADE CONSTRAINTS];

        //ex
        REVOKE SELECT , INSERT
        ON emp
        FROM scott
        [CASCADE CONSTRAINTS];

- DML
    ğŸ’¡ â€˜***Data Manipulation Language*â€™** ì˜ ì•½ìë¡œ ****í…Œì´ë¸”ì— ë°ì´í„°ë¥¼ ê²€ìƒ‰, ì‚½ì…, ìˆ˜ì •, ì‚­ì œí•˜ëŠ”ë° ****ì‚¬ìš©í•©ë‹ˆë‹¤**.**

    - INSERT : í…Œì´ë¸”ì— ìƒˆë¡œìš´ rowë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        INSERT INTO í…Œì´ë¸”ì´ë¦„(í•„ë“œì´ë¦„1, í•„ë“œì´ë¦„2, í•„ë“œì´ë¦„3, ...) VALUES(ë°ì´í„°ê°’1, ë°ì´í„°ê°’2, ë°ì´í„°ê°’3, ...);
        INSERT INTO í…Œì´ë¸”ì´ë¦„ VALUES(ë°ì´í„°ê°’1, ë°ì´í„°ê°’2, ë°ì´í„°ê°’3, ...);

    - SELECT : í…Œì´ë¸”ì˜ rowë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        SELECT í•„ë“œì´ë¦„ FROM í…Œì´ë¸”ì´ë¦„ [WHERE ì¡°ê±´];

    - UPDATE : í…Œì´ë¸”ì˜ rowì˜ ë‚´ìš©ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        UPDATE í…Œì´ë¸”ì´ë¦„ SET í•„ë“œì´ë¦„1=ë°ì´í„°ê°’1, í•„ë“œì´ë¦„2=ë°ì´í„°ê°’2, ... WHERE í•„ë“œì´ë¦„=ë°ì´í„°ê°’;

    - DELETE : í…Œì´ë¸”ì˜ rowë¥¼ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        DELETE FROM í…Œì´ë¸”ì´ë¦„ WHERE í•„ë“œì´ë¦„=ë°ì´í„°ê°’;



## 22. JDBCë€ ë¬´ì—‡ì¼ê¹Œ?
ğŸ“Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì™€ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì–´ë–»ê²Œ ì†Œí†µí•´ì•¼ í• ê¹Œìš”?
- ìš°ë¦¬ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ìš”ì²­ì„ ë°›ê³ , í•´ë‹¹ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì†Œí†µì„ í•´ì•¼í•©ë‹ˆë‹¤.
- ë”°ë¼ì„œ ì‹¤ì œë¡œ ì„œë²„ê°€ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì–´ë– í•œ ë°©ë²•ì„ í†µí•´ ì†Œí†µí•˜ê³  ìˆëŠ”ì§€ ì•Œì•„ë³´ë ¤ê³  í•©ë‹ˆë‹¤.
- JDBCì˜ ë“±ì¥ë°°ê²½
    - ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ DBì— ì ‘ê·¼ í•˜ê¸° ìœ„í•´ì„œëŠ” ì—¬ëŸ¬ê°€ì§€ ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤.
        1. ìš°ì„  DBì— ì—°ê²°í•˜ê¸° ìœ„í•´ ì»¤ë„¥ì…˜ì„ ì—°ê²°í•´ì•¼í•©ë‹ˆë‹¤.
        2. SQLì„ ì‘ì„±í•œ í›„ ì»¤ë„¥ì…˜ì„ í†µí•´ SQLì„ ìš”ì²­í•©ë‹ˆë‹¤.
        3. ìš”ì²­í•œ SQLì— ëŒ€í•œ ê²°ê³¼ë¥¼ ì‘ë‹µ ë°›ìŠµë‹ˆë‹¤.
    - ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ MySQL ì„œë²„ë¥¼ PostgreSQL ì„œë²„ë¡œ ë³€ê²½í•œë‹¤ë©´ ë¬´ìŠ¨ì¼ì´ ë°œìƒí• ê¹Œìš”?
    - MySQLê³¼ PostgreSQLì€ ì»¤ë„¥ì…˜ì„ ì—°ê²°í•˜ëŠ” ë°©ë²•, SQLì„ ì „ë‹¬í•˜ëŠ” ë°©ë²•, ê²°ê³¼ë¥¼ ì‘ë‹µë°›ëŠ” ë°©ë²• ëª¨ë‘ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - ë”°ë¼ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ì‘ì„±í–ˆë˜ DB ì—°ê²° ë¡œì§ë“¤ì„ ì „ë¶€ ìˆ˜ì •í•´ì•¼í•©ë‹ˆë‹¤.
    - ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸°ìœ„í•´ JDBC í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ê°€ ë“±ì¥í–ˆìŠµë‹ˆë‹¤.
    - JDBCëŠ” Java Database Connectivityë¡œ DBì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ Javaì—ì„œ ì œê³µí•˜ëŠ” APIì…ë‹ˆë‹¤.
    - JDBCì— ì—°ê²°í•´ì•¼í•˜ëŠ” DBì˜ JDBC ë“œë¼ì´ë²„ë¥¼ ì œê³µí•˜ë©´ DB ì—°ê²° ë¡œì§ì„ ë³€ê²½í•  í•„ìš”ì—†ì´ DB ë³€ê²½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
        - DB íšŒì‚¬ë“¤ì€ ìì‹ ë“¤ì˜ DBì— ë§ë„ë¡ JDBC ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í›„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì œê³µí•˜ëŠ”ë° ì´ë¥¼ JDBC ë“œë¼ì´ë²„ë¼ ë¶€ë¦…ë‹ˆë‹¤.
    - ë”°ë¼ì„œ, MySQL ë“œë¼ì´ë²„ë¥¼ ì‚¬ìš©í•´ DBì— ì—°ê²°ì„ í•˜ë‹¤ PostgreSQL ì„œë²„ë¡œ ë³€ê²½ì´ í•„ìš”í•  ë•Œ ë“œë¼ì´ë²„ë§Œ êµì²´í•˜ë©´ ì†ì‰½ê²Œ DB ë³€ê²½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

- JdbcTemplateì´ë€?
    - JDBCì˜ ë“±ì¥ìœ¼ë¡œ ì†ì‰½ê²Œ DBêµì²´ê°€ ê°€ëŠ¥í•´ì¡Œì§€ë§Œ ì•„ì§ë„ DBì— ì—°ê²°í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ê°€ì§€ ì‘ì—… ë¡œì§ë“¤ì„ ì§ì ‘ ì‘ì„±í•´ì•¼í•œë‹¤ëŠ” ë¶ˆí¸í•¨ì´ ë‚¨ì•˜ìŠµë‹ˆë‹¤.
    - ì´ëŸ¬í•œ ë¶ˆí¸í•¨ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ì»¤ë„¥ì…˜ ì—°ê²°, statement ì¤€ë¹„ ë° ì‹¤í–‰, ì»¤ë„¥ì…˜ ì¢…ë£Œ ë“±ì˜ ë°˜ë³µì ì´ê³  ì¤‘ë³µë˜ëŠ” ì‘ì—…ë“¤ì„ ëŒ€ì‹  ì²˜ë¦¬í•´ì£¼ëŠ” JdbcTemplateì´ ë“±ì¥í–ˆìŠµë‹ˆë‹¤.

- JdbcTemplate ì‚¬ìš©ë°©ë²•
    1. application.propertiesì— DBì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ì •ë³´ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
        - [ì½”ë“œ ìŠ¤ë‹ˆí«] application.properties
            spring.datasource.url=jdbc:mysql://localhost:3306/memo
            spring.datasource.username=root
            spring.datasource.password={ë¹„ë°€ë²ˆí˜¸}
            spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

    2. build.gradleì— JDBC ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ MySQLì„ ë“±ë¡í•©ë‹ˆë‹¤.
        - [ì½”ë“œ ìŠ¤ë‹ˆí«] build.gradle : JDBC, MySQL ì¶”ê°€
            // MySQL
            implementation 'mysql:mysql-connector-java:8.0.28'
            implementation 'org.springframework.boot:spring-boot-starter-data-jdbc'

        - í”„ë¡œì íŠ¸ ì„¤ì •
            - Intellij Database ì—°ë™
                - CREATE DATABASE
                    CREATE DATABASE memo;

                - ì—°ë™ ìˆœì„œ
                    1. Database íƒ­ì„ í´ë¦­í•˜ì‹œê³  + ë²„íŠ¼ì„ ëˆ„ë¦…ë‹ˆë‹¤.
                    2. Data Source > MySQL ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.
                    3. User, Password, Database ì •ë³´ë¥¼ ì¶”ê°€í•œ í›„ Okë¥¼ í´ë¦­í•©ë‹ˆë‹¤.
                    4. MySQL Databaseì— ì—°ê²°ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.

            - [ì½”ë“œ ìŠ¤ë‹ˆí«] create memo table
                create table memo
                (
                    id       bigint       not null auto_increment,
                    contents varchar(500) not null,
                    username varchar(255) not null,
                    primary key (id)
                );

    3. DBì—°ê²°ì´ í•„ìš”í•œ ê³³ì—ì„œ JdbcTemplateì„ ì£¼ì…ë°›ì•„ì™€ ì‚¬ìš©í•©ë‹ˆë‹¤.
        private final JdbcTemplate jdbctemplate;

        public MemoRepository(JdbcTemplate jdbcTemplate) {
                this.jdbcTemplate = jdbcTemplate;
        }
        - ìƒì„±ìì˜ íŒŒë¼ë¯¸í„°ë¥¼ í†µí•´ JdbcTemplate ê°ì²´ê°€ ìë™ìœ¼ë¡œ ë„˜ì–´ì™€ jdbctemplate ë³€ìˆ˜ì— ì €ì¥ë©ë‹ˆë‹¤.

    - INSERT
        String sql = "INSERT INTO memo (username, contents) VALUES (?, ?)";
        jdbcTemplate.update(sql, "Robbie", "ì˜¤ëŠ˜ í•˜ë£¨ë„ í™”ì´íŒ…!");

        - INSERT SQLì„ ì‘ì„±í•´ String ë³€ìˆ˜ì— ì €ì¥í•©ë‹ˆë‹¤.
            - ì´ë•Œ, ë„£ê³ ì í•˜ëŠ” ë°ì´í„° ë¶€ë¶„ì— ?ë¥¼ ì‚¬ìš©í•˜ë©´ ìœ ë™ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë„£ì–´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        - `jdbcTemplate.update()` ë©”ì„œë“œëŠ” INSERT, UPDATE, DELETE ì™€ ê°™ì´ ìƒì„±, ìˆ˜ì •, ì‚­ì œì— ì‚¬ìš©ë  ìˆ˜ ìˆëŠ”ë° ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ SQLì„ ë°›ê³  ê·¸ ì´í›„ì—ëŠ” ?ì— ë“¤ì–´ê°ˆ ê°’ì„ ë°›ìŠµë‹ˆë‹¤.
    - UPDATE
        String sql = "UPDATE memo SET username = ? WHERE id = ?";
        jdbcTemplate.update(sql, "Robbert", 1);

        - UPDATE SQLì„ ì‘ì„±í•´ String ë³€ìˆ˜ì— ì €ì¥í•œ í›„ `update()` ë©”ì„œë“œ ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ë„£ì–´ì¤ë‹ˆë‹¤.
            - ì´ë•Œ, ë„£ê³ ì í•˜ëŠ” ë°ì´í„° ë¶€ë¶„ì— ?ë¥¼ ì‚¬ìš©í•˜ë©´ ìœ ë™ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë„£ì–´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - DELETE
        String sql = "DELETE FROM memo WHERE id = ?";
        jdbcTemplate.update(sql, 1);

        - DELETE SQLì„ ì‘ì„±í•´ String ë³€ìˆ˜ì— ì €ì¥í•œ í›„ `update()` ë©”ì„œë“œ ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ë„£ì–´ì¤ë‹ˆë‹¤.
            - ì´ë•Œ, ë„£ê³ ì í•˜ëŠ” ë°ì´í„° ë¶€ë¶„ì— ?ë¥¼ ì‚¬ìš©í•˜ë©´ ìœ ë™ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë„£ì–´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - SELECT
        String sql = "SELECT * FROM memo";
        return jdbcTemplate.query(sql, new RowMapper<MemoResponseDto>() {
            @Override
            public MemoResponseDto mapRow(ResultSet rs, int rowNum) throws SQLException {
                // SQL ì˜ ê²°ê³¼ë¡œ ë°›ì•„ì˜¨ Memo ë°ì´í„°ë“¤ì„ MemoResponseDto íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•´ì¤„ ë©”ì„œë“œ
                Long id = rs.getLong("id");
                String username = rs.getString("username");
                String contents = rs.getString("contents");
                return new MemoResponseDto(id, username, contents);
            }
        });

        - SELECT SQLì„ ì‘ì„±í•´ String ë³€ìˆ˜ì— ì €ì¥í•œ í›„ `query()` ë©”ì„œë“œ ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ë„£ì–´ì¤ë‹ˆë‹¤.
        - SELECTì˜ ê²½ìš° ê²°ê³¼ê°€ ì—¬ëŸ¬ ì¤„ë¡œ ë„˜ì–´ì˜¤ê¸° ë•Œë¬¸ì— RowMapperë¥¼ ì‚¬ìš©í•˜ì—¬ í•œ ì¤„ì”© ì²˜ë¦¬ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            - RowMapperëŠ” ì¸í„°í˜ì´ìŠ¤ ì´ê¸° ë•Œë¬¸ì— ìµëª… í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ ì²˜ë¦¬í•©ë‹ˆë‹¤.
            - ì˜¤ë²„ë¼ì´ë”© ëœ mapRow ë©”ì„œë“œëŠ” ì œë„¤ë¦­ìŠ¤ì— ì„ ì–¸í•œ MemoResponseDto íƒ€ì…ìœ¼ë¡œ ë°ì´í„° í•œ ì¤„ì„ ë³€í™˜í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

    - **[ì½”ë“œ ìŠ¤ë‹ˆí«] MemoController**
        package com.sparta.memo.controller;

        import com.sparta.memo.dto.MemoRequestDto;
        import com.sparta.memo.dto.MemoResponseDto;
        import com.sparta.memo.entity.Memo;
        import org.springframework.jdbc.core.JdbcTemplate;
        import org.springframework.jdbc.core.RowMapper;
        import org.springframework.jdbc.support.GeneratedKeyHolder;
        import org.springframework.jdbc.support.KeyHolder;
        import org.springframework.web.bind.annotation.*;

        import java.sql.PreparedStatement;
        import java.sql.ResultSet;
        import java.sql.SQLException;
        import java.sql.Statement;
        import java.util.List;

        @RestController
        @RequestMapping("/api")
        public class MemoController {

            private final JdbcTemplate jdbcTemplate;

            public MemoController(JdbcTemplate jdbcTemplate) {
                this.jdbcTemplate = jdbcTemplate;
            }

            @PostMapping("/memos")
            public MemoResponseDto createMemo(@RequestBody MemoRequestDto requestDto) {
                // RequestDto -> Entity
                Memo memo = new Memo(requestDto);

                // DB ì €ì¥
                KeyHolder keyHolder = new GeneratedKeyHolder(); // ê¸°ë³¸ í‚¤ë¥¼ ë°˜í™˜ë°›ê¸° ìœ„í•œ ê°ì²´

                String sql = "INSERT INTO memo (username, contents) VALUES (?, ?)";
                jdbcTemplate.update( con -> {
                            PreparedStatement preparedStatement = con.prepareStatement(sql,
                                    Statement.RETURN_GENERATED_KEYS);

                            preparedStatement.setString(1, memo.getUsername());
                            preparedStatement.setString(2, memo.getContents());
                            return preparedStatement;
                        },
                        keyHolder);

                // DB Insert í›„ ë°›ì•„ì˜¨ ê¸°ë³¸í‚¤ í™•ì¸
                Long id = keyHolder.getKey().longValue();
                memo.setId(id);

                // Entity -> ResponseDto
                MemoResponseDto memoResponseDto = new MemoResponseDto(memo);

                return memoResponseDto;
            }

            @GetMapping("/memos")
            public List<MemoResponseDto> getMemos() {
                // DB ì¡°íšŒ
                String sql = "SELECT * FROM memo";

                return jdbcTemplate.query(sql, new RowMapper<MemoResponseDto>() {
                    @Override
                    public MemoResponseDto mapRow(ResultSet rs, int rowNum) throws SQLException {
                        // SQL ì˜ ê²°ê³¼ë¡œ ë°›ì•„ì˜¨ Memo ë°ì´í„°ë“¤ì„ MemoResponseDto íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•´ì¤„ ë©”ì„œë“œ
                        Long id = rs.getLong("id");
                        String username = rs.getString("username");
                        String contents = rs.getString("contents");
                        return new MemoResponseDto(id, username, contents);
                    }
                });
            }

            @PutMapping("/memos/{id}")
            public Long updateMemo(@PathVariable Long id, @RequestBody MemoRequestDto requestDto) {
                // í•´ë‹¹ ë©”ëª¨ê°€ DBì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
                Memo memo = findById(id);
                if(memo != null) {
                    // memo ë‚´ìš© ìˆ˜ì •
                    String sql = "UPDATE memo SET username = ?, contents = ? WHERE id = ?";
                    jdbcTemplate.update(sql, requestDto.getUsername(), requestDto.getContents(), id);

                    return id;
                } else {
                    throw new IllegalArgumentException("ì„ íƒí•œ ë©”ëª¨ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                }
            }

            @DeleteMapping("/memos/{id}")
            public Long deleteMemo(@PathVariable Long id) {
                // í•´ë‹¹ ë©”ëª¨ê°€ DBì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
                Memo memo = findById(id);
                if(memo != null) {
        						// memo ì‚­ì œ
                    String sql = "DELETE FROM memo WHERE id = ?";
                    jdbcTemplate.update(sql, id);

                    return id;
                } else {
                    throw new IllegalArgumentException("ì„ íƒí•œ ë©”ëª¨ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                }
            }

            private Memo findById(Long id) {
                // DB ì¡°íšŒ
                String sql = "SELECT * FROM memo WHERE id = ?";

                return jdbcTemplate.query(sql, resultSet -> {
                    if(resultSet.next()) {
                        Memo memo = new Memo();
                        memo.setUsername(resultSet.getString("username"));
                        memo.setContents(resultSet.getString("contents"));
                        return memo;
                    } else {
                        return null;
                    }
                }, id);
            }
        }

    ğŸ’¡ í˜¹ì‹œ! JdbcTemplateì„ ì‚¬ìš©í•˜ì—¬ DBì™€ ì†Œí†µí•˜ëŠ” ë°©ë²•ì´ ì–´ë µê³  ë³µì¡í•˜ë‹¤ê³  ëŠê»´ì§€ì…¨ë‚˜ìš”?
    ë¬¼ë¡  JdbcTemplateì´ JDBCë¥¼ ì§ì ‘ ì‚¬ìš©í•  ë•Œ ë°œìƒí•˜ëŠ” ë¶ˆí¸í•¨ì„ í•´ê²°í•´ ì£¼ì—ˆì§€ë§Œ ì•„ì§ë„ ë³µì¡í•˜ê³  ì‚¬ìš©í•˜ê¸° ê¹Œë‹¤ë¡œìš´ ê²ƒì€ ë¶„ëª…í•œ ì‚¬ì‹¤ì…ë‹ˆë‹¤.
    ë‹¤í–‰íˆë„ Java ê°œë°œìë“¤ì„ ìœ„í•´ DBì™€ ê°ì²´ë¥¼ ë§¤í•‘í•˜ì—¬ ì†Œí†µí•  ìˆ˜ ìˆëŠ” ORMì´ë¼ëŠ” ê¸°ìˆ ì´ ë“±ì¥í–ˆìŠµë‹ˆë‹¤.
    ë”°ë¼ì„œ JdbcTemplate ì‚¬ìš©ë°©ë²•ì€ ê°€ë³ê²Œ ë³´ê³  ë„˜ì–´ê°€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.
