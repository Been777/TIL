# ÎÇ¥ÏùºÎ∞∞ÏõÄÏ∫†ÌîÑ 240618 TIL
Java 46ÏùºÏ∞®
My Select Shop ÌîÑÎ°úÏ†ùÌä∏(14~16)
-------------------------------------------------------------------------------


# My Select Shop
## 14. My Select Shop ÏÑ§Í≥Ñ
- ÌîÑÎ°úÏ†ùÌä∏ ÏÉùÏÑ±
    - ÌîÑÎ°úÏ†ùÌä∏ Ï§ÄÎπÑÌïòÍ∏∞
        1. IntelliJÎ•º Ïã§ÌñâÌï©ÎãàÎã§.
        2. New ProjectÎ•º ÌÅ¥Î¶≠Ìï©ÎãàÎã§.
        3. ÏôºÏ™Ω Î©îÎâ¥ÏóêÏÑú "Spring Initializr‚ÄùÎ•º ÌÅ¥Î¶≠ÌïòÍ≥† ÏïÑÎûòÏôÄ Í∞ôÏù¥ ÏÑ§Ï†ïÌï©ÎãàÎã§.
        4.  üöí**[Ï§ëÏöî] Íº≠ Îã§Ïùå ÏÇ¨Ìï≠ÏùÑ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.** 
            - Name: myselectshop
            - **Language: Java**
            - **Build system: Gradle - Groovy**
            - Group: com.sparta
            - **JDK: 17**
            - ÌîÑÎ°úÏ†ùÌä∏ Í≤ΩÎ°ú(Location)Îäî ÏûêÏú†Î°≠Í≤å ÏÑ§Ï†ïÌïòÏãúÎ©¥ Îê©ÎãàÎã§.
        5. NextÎ•º ÌÅ¥Î¶≠Ìï©ÎãàÎã§.
        6. DependenciesÎ•º ÏïÑÎûò ÏÇ¨ÏßÑÍ≥º Í∞ôÏù¥ Ï∂îÍ∞ÄÌï¥Ï£ºÍ≥† CreateÎ•º ÌÅ¥Î¶≠Ìï©ÎãàÎã§.

    - ÌîÑÎ°úÏ†ùÌä∏ ÏÑ§Ï†ïÏ∂îÍ∞Ä
        - build.gradle
            - [ÏΩîÎìú Ïä§ÎãàÌé´] JWT, json
                
                ```groovy
                // JWT
                compileOnly group: 'io.jsonwebtoken', name: 'jjwt-api', version: '0.11.5'
                runtimeOnly group: 'io.jsonwebtoken', name: 'jjwt-impl', version: '0.11.5'
                runtimeOnly group: 'io.jsonwebtoken', name: 'jjwt-jackson', version: '0.11.5'
                
                // json
                implementation 'org.json:json:20230227'
                ```
                
            - Spring-SecurityÎäî Ïû†Ïãú Ï£ºÏÑù Ï≤òÎ¶¨Ìï©ÎãàÎã§.
        - src > main > resources > application.properties
            - [ÏΩîÎìú Ïä§ÎãàÌé´] application.properties
                
                ```xml
                spring.datasource.url=jdbc:mysql://localhost:3306/shop
                spring.datasource.username=root
                spring.datasource.password={ÎπÑÎ∞ÄÎ≤àÌò∏}
                spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
                
                spring.jpa.hibernate.ddl-auto=update
                
                spring.jpa.properties.hibernate.show_sql=true
                spring.jpa.properties.hibernate.format_sql=true
                spring.jpa.properties.hibernate.use_sql_comments=true
                
                jwt.secret.key=7Iqk7YyM66W07YOA7L2U65Sp7YG065+9U3ByaW5n6rCV7J2Y7Yqc7YSw7LWc7JuQ67mI7J6F64uI64ukLg==
                ```
                
        - Intellij Database Ïó∞Îèô
            - CREATE DATABASE
                
                ```sql
                CREATE DATABASE shop;
                ```
                
            - Ïó∞Îèô ÏàúÏÑú
                1. Database ÌÉ≠ÏùÑ ÌÅ¥Î¶≠ÌïòÏãúÍ≥† + Î≤ÑÌäºÏùÑ ÎàÑÎ¶ÖÎãàÎã§.
                2. Data Source > MySQL Î•º ÌÅ¥Î¶≠Ìï©ÎãàÎã§.
                3. User, Password, Database Ï†ïÎ≥¥Î•º Ï∂îÍ∞ÄÌïú ÌõÑ OkÎ•º ÌÅ¥Î¶≠Ìï©ÎãàÎã§.
                4. MySQL DatabaseÏóê Ïó∞Í≤∞Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.

        - ÌéòÏù¥ÏßÄ Controller
            - [ÏΩîÎìú Ïä§ÎãàÌé´] HomeController
                
                ```java
                package com.sparta.myselectshop.controller;
                
                import org.springframework.stereotype.Controller;
                import org.springframework.web.bind.annotation.GetMapping;
                
                @Controller
                public class HomeController {
                    @GetMapping("/")
                    public String home() {
                        return "index";
                    }
                }
                ```        
            
    - ÏãúÏûëÏΩîÎìú
        üëâ src > main > resources > templates Ïóê ÏïÑÎûò html ÌååÏùºÏùò ÏΩîÎìúÏä§ÎãàÌé´ÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ Ï∂îÍ∞Ä Ìï¥Ï£ºÏÑ∏Ïöî.
        (ÌòπÏãú ÏóÜÎã§Î©¥ ÎßåÎì§Ïñ¥Ï£ºÏÑ∏Ïöî.)

        - **[ÏΩîÎìú Ïä§ÎãàÌé´] index.html**
            
            ```html
            <!doctype html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport"
                      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
                <meta http-equiv="X-UA-Compatible" content="ie=edge">
            		<link rel="preconnect" href="https://fonts.gstatic.com">
            
                <link rel="stylesheet" href="/css/style.css">
                <script src="https://code.jquery.com/jquery-3.7.0.min.js"
                        integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
                <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>
                <script src="/js/basic.js"></script>
                <title>ÎÇòÎßåÏùò ÏÖÄÎ†âÏÉµ</title>
            </head>
            <body>
            <div class="header" style="position:relative;">
                <!--headr-->
                <div id="header-title-select-shop">
                    My Select Shop
                </div>
                <!--/headr-->
            </div>
            <div class="nav">
                <div class="nav-see active">
                    Î™®ÏïÑÎ≥¥Í∏∞
                </div>
                <div class="nav-search">
                    ÌÉêÏÉâÌïòÍ∏∞
                </div>
            </div>
            <div id="see-area">
                <div id="product-container">
            
                </div>
            </div>
            <div id="search-area">
                <div>
                    <input type="text" id="query">
                </div>
                <div id="search-result-box">
            
                </div>
                <div id="container" class="popup-container">
                    <div class="popup">
                        <button id="close" class="close">
                            X
                        </button>
                        <h1>‚è∞ÏµúÏ†ÄÍ∞Ä ÏÑ§Ï†ïÌïòÍ∏∞</h1>
                        <p>ÏµúÏ†ÄÍ∞ÄÎ•º ÏÑ§Ï†ïÌï¥ÎëêÎ©¥ ÏÑ†ÌÉùÌïòÏã† ÏÉÅÌíàÏùò ÏµúÏ†ÄÍ∞ÄÍ∞Ä Îñ¥ÏùÑ Îïå<br/> ÌëúÏãúÌï¥ÎìúÎ†§Ïöî!</p>
                        <div>
                            <input type="text" id="myprice" placeholder="200,000">Ïõê
                        </div>
                        <button class="cta" onclick="setMyprice()">ÏÑ§Ï†ïÌïòÍ∏∞</button>
                    </div>
                </div>
            </div>
            </body>
            </html>
            ```

        üëâ src > main > resources > static Ïóê css, js Ìè¥ÎçîÎ•º ÎßåÎì§Í≥†, ÏïÑÎûò css, js ÌååÏùºÏùÑ ÎÑ£Ïñ¥Ï£ºÏÑ∏Ïöî.

        - css
            - **[ÏΩîÎìú Ïä§ÎãàÌé´] style.css**
                
                ```css
                * {
                    font-family: 'Georgia', serif;
                }
                
                body {
                    margin: 0px;
                }
                
                #search-result-box {
                    margin-top: 15px;
                }
                
                .search-itemDto {
                    width: 530px;
                    display: flex;
                    flex-direction: row;
                    align-content: center;
                    justify-content: space-around;
                }
                
                .search-itemDto-left img {
                    width: 159px;
                    height: 159px;
                }
                
                .search-itemDto-center {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: space-evenly;
                }
                
                .search-itemDto-center div {
                    width: 280px;
                    height: 23px;
                    font-size: 18px;
                    font-weight: normal;
                    font-stretch: normal;
                    font-style: normal;
                    line-height: 1.3;
                    letter-spacing: -0.9px;
                    text-align: left;
                    color: #343a40;
                    overflow: hidden;
                    white-space: nowrap;
                    text-overflow: ellipsis;
                }
                
                .search-itemDto-center div.price {
                    height: 27px;
                    font-size: 27px;
                    font-weight: 600;
                    font-stretch: normal;
                    font-style: normal;
                    line-height: 1;
                    letter-spacing: -0.54px;
                    text-align: left;
                    color: #E8344E;
                }
                
                .search-itemDto-center span.unit {
                    width: 17px;
                    height: 18px;
                    font-size: 18px;
                    font-weight: 500;
                    font-stretch: normal;
                    font-style: normal;
                    line-height: 1;
                    letter-spacing: -0.9px;
                    text-align: center;
                    color: #000000;
                }
                
                .search-itemDto-right {
                    display: inline-block;
                    height: 100%;
                    vertical-align: middle
                }
                
                .search-itemDto-right img {
                    height: 25px;
                    width: 25px;
                    vertical-align: middle;
                    margin-top: 60px;
                    cursor: pointer;
                }
                
                input#query {
                    padding: 15px;
                    width: 526px;
                    border-radius: 2px;
                    background-color: #e9ecef;
                    border: none;
                
                    background-image: url('../images/icon-search.png');
                    background-repeat: no-repeat;
                    background-position: right 10px center;
                    background-size: 20px 20px;
                }
                
                input#query::placeholder {
                    padding: 15px;
                }
                
                button {
                    color: white;
                    border-radius: 4px;
                    border-radius: none;
                }
                
                .popup-container {
                    display: none;
                    position: fixed;
                    top: 0;
                    left: 0;
                    bottom: 0;
                    right: 0;
                    background-color: rgba(0, 0, 0, 0.5);
                    align-items: center;
                    justify-content: center;
                }
                
                .popup-container.active {
                    display: flex;
                }
                
                .popup {
                    padding: 20px;
                    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
                    position: relative;
                    width: 370px;
                    height: 209px;
                    border-radius: 11px;
                    background-color: #ffffff;
                }
                
                .popup h1 {
                    margin: 0px;
                    font-size: 22px;
                    font-weight: 500;
                    font-stretch: normal;
                    font-style: normal;
                    line-height: 1;
                    letter-spacing: -1.1px;
                    color: #000000;
                }
                
                .popup input {
                    width: 320px;
                    height: 22px;
                    border-radius: 2px;
                    border: solid 1.1px #dee2e6;
                    margin-right: 9px;
                    margin-bottom: 10px;
                    padding-left: 10px;
                }
                
                .add-folder-btn {
                    width: 330px;
                }
                
                .popup button.close {
                    position: absolute;
                    top: 15px;
                    right: 15px;
                    color: #adb5bd;
                    background-color: #fff;
                    font-size: 19px;
                    border: none;
                }
                
                .popup button.cta {
                    width: 369.1px;
                    height: 43.9px;
                    border-radius: 2px;
                    background-color: #15aabf;
                    border: none;
                }
                
                .popup button.cta2 {
                    width: 352.1px;
                    height: 43.9px;
                    border-radius: 2px;
                    background-color: #15aabf;
                    border: none;
                }
                
                #search-area, #see-area {
                    width: 530px;
                    margin: auto;
                }
                
                .nav {
                    width: 530px;
                    margin: 30px auto;
                    display: flex;
                    align-items: center;
                    justify-content: space-around;
                }
                
                .nav div {
                    cursor: pointer;
                }
                
                .nav div.active {
                    font-weight: 700;
                }
                
                .header {
                    height: 255px;
                    box-sizing: border-box;
                    background-color: #15aabf;
                    color: white;
                    text-align: center;
                    padding-top: 80px;
                    /*padding: 50px;*/
                    font-size: 45px;
                    font-weight: bold;
                }
                
                #header-title-login-user {
                    font-size: 36px;
                    letter-spacing: -1.08px;
                }
                
                #header-title-select-shop {
                    margin-top: 20px;
                    font-size: 45px;
                    letter-spacing: 1.1px;
                }
                
                #product-container {
                    grid-template-columns: 100px 50px 100px;
                    grid-template-rows: 80px auto 80px;
                    column-gap: 10px;
                    row-gap: 15px;
                }
                
                .product-card {
                    width: 300px;
                    margin: auto;
                    cursor: pointer;
                }
                
                .product-card .card-header {
                    width: 300px;
                }
                
                .product-card .card-header img {
                    width: 300px;
                }
                
                .product-card .card-body {
                    margin-top: 15px;
                }
                
                .product-card .card-body .title {
                    font-size: 11px;
                    font-weight: normal;
                    font-stretch: normal;
                    font-style: normal;
                    line-height: 1;
                    letter-spacing: -0.75px;
                    text-align: left;
                    color: #343a40;
                    margin-bottom: 10px;
                    overflow: hidden;
                    white-space: nowrap;
                    text-overflow: ellipsis;
                }
                
                .product-card .card-body .lprice {
                    font-size: 15.8px;
                    font-weight: normal;
                    font-stretch: normal;
                    font-style: normal;
                    line-height: 1;
                    letter-spacing: -0.79px;
                    color: #000000;
                    margin-bottom: 10px;
                }
                
                .product-card .card-body .lprice span {
                    font-size: 13.4px;
                    font-weight: 600;
                    font-stretch: normal;
                    font-style: normal;
                    line-height: 1;
                    letter-spacing: -0.43px;
                    text-align: left;
                    color: #E8344E;
                }
                
                .product-card .card-body .isgood {
                    margin-top: 10px;
                    padding: 10px 20px;
                    color: white;
                    border-radius: 2.6px;
                    background-color: #ff8787;
                    width: 48px;
                }
                
                .pagination {
                    font-size: 14px;
                    margin-top: 12px;
                    margin-left: auto;
                    margin-right: auto;
                    width: 65%;
                }
                
                .folder-active {
                    background-color: crimson !important;;
                }
                
                .none {
                    display: none;
                }
                
                .folder-bar {
                    width: 100%;
                    overflow: hidden;
                }
                
                .folder-black, .folder-black:hover {
                    color: #fff!important;
                    background-color: #000!important;
                }
                
                .folder-bar .folder-button {
                    white-space: normal;
                }
                .folder-bar .folder-bar-item {
                    font-size: 17px;
                    padding: 8px 16px;
                    float: left;
                    width: auto;
                    border: none;
                    display: block;
                    outline: 0;
                }
                
                .folder-btn, .folder-button {
                    border: none;
                    display: inline-block;
                    padding: 8px 16px;
                    vertical-align: middle;
                    overflow: hidden;
                    text-decoration: none;
                    color: inherit;
                    background-color: inherit;
                    text-align: center;
                    cursor: pointer;
                    white-space: nowrap;
                }
                
                #login-form {
                    width: 538px;
                    height: 710px;
                    margin: 70px auto 141px auto;
                    display: flex;
                    flex-direction: column;
                    justify-content: flex-start;
                    align-items: center;
                    /*gap: 96px;*/
                    padding: 56px 0 0;
                    border-radius: 10px;
                    box-shadow: 0 4px 25px 0 rgba(0, 0, 0, 0.15);
                    background-color: #ffffff;
                }
                
                #login-title {
                    width: 303px;
                    height: 32px;
                    /*margin: 56px auto auto auto;*/
                    flex-grow: 0;
                    font-family: SpoqaHanSansNeo;
                    font-size: 32px;
                    font-weight: bold;
                    font-stretch: normal;
                    font-style: normal;
                    line-height: 1;
                    letter-spacing: -0.96px;
                    text-align: left;
                    color: #212529;
                }
                
                #login-kakao-btn {
                    border-width: 0;
                    margin: 96px 0 8px;
                    width: 393px;
                    height: 62px;
                    flex-grow: 0;
                    display: flex;
                    flex-direction: row;
                    justify-content: center;
                    align-items: center;
                    gap: 10px;
                    /*margin: 0 0 8px;*/
                    padding: 11px 12px;
                    border-radius: 5px;
                    background-color: #ffd43b;
                
                    font-family: SpoqaHanSansNeo;
                    font-size: 20px;
                    font-weight: bold;
                    font-stretch: normal;
                    font-style: normal;
                    color: #414141;
                }
                
                #login-id-btn {
                    width: 393px;
                    height: 62px;
                    flex-grow: 0;
                    display: flex;
                    flex-direction: row;
                    justify-content: center;
                    align-items: center;
                    gap: 10px;
                    /*margin: 8px 0 0;*/
                    padding: 11px 12px;
                    border-radius: 5px;
                    border: solid 1px #212529;
                    background-color: #ffffff;
                
                    font-family: SpoqaHanSansNeo;
                    font-size: 20px;
                    font-weight: bold;
                    font-stretch: normal;
                    font-style: normal;
                    color: #414141;
                }
                
                .login-input-box {
                    border-width: 0;
                
                    width: 370px !important;
                    height: 52px;
                    margin: 14px 0 0;
                    border-radius: 5px;
                    background-color: #e9ecef;
                }
                
                .login-id-label {
                    /*width: 44.1px;*/
                    /*height: 16px;*/
                    width: 382px;
                    padding-left: 11px;
                    margin-top: 40px;
                    /*margin: 0 337.9px 14px 11px;*/
                    font-family: NotoSansCJKKR;
                    font-size: 16px;
                    font-weight: normal;
                    font-stretch: normal;
                    font-style: normal;
                    line-height: 1;
                    letter-spacing: -0.8px;
                    text-align: left;
                    color: #212529;
                }
                
                #login-id-submit {
                    border-width: 0;
                    width: 393px;
                    height: 62px;
                    flex-grow: 0;
                    display: flex;
                    flex-direction: row;
                    justify-content: center;
                    align-items: center;
                    gap: 10px;
                    margin: 40px 0 0;
                    padding: 11px 12px;
                    border-radius: 5px;
                    background-color: #15aabf;
                
                    font-family: SpoqaHanSansNeo;
                    font-size: 20px;
                    font-weight: bold;
                    font-stretch: normal;
                    font-style: normal;
                    line-height: 1;
                    letter-spacing: normal;
                    text-align: center;
                    color: #ffffff;
                }
                
                #sign-text {
                    position:absolute;
                    top:48px;
                    right:110px;
                    font-size: 18px;
                    font-family: SpoqaHanSansNeo;
                    font-size: 18px;
                    font-weight: 500;
                    font-stretch: normal;
                    font-style: normal;
                    line-height: 1;
                    letter-spacing: 0.36px;
                    text-align: center;
                    color: #ffffff;
                }
                
                #login-text {
                    position:absolute;
                    top:48px;
                    right:50px;
                    font-size: 18px;
                    font-family: SpoqaHanSansNeo;
                    font-size: 18px;
                    font-weight: 500;
                    font-stretch: normal;
                    font-style: normal;
                    line-height: 1;
                    letter-spacing: 0.36px;
                    text-align: center;
                    color: #ffffff;
                }
                
                @media ( max-width: 768px ) {
                    body {
                        margin: 0px;
                    }
                
                    #search-result-box {
                        margin-top: 15px;
                    }
                
                    .search-itemDto {
                        width: 330px;
                        display: flex;
                        flex-direction: row;
                        align-content: center;
                        justify-content: space-around;
                    }
                
                    .search-itemDto-left img {
                        width: 80px;
                        height: 80px;
                    }
                
                    .search-itemDto-center {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: space-evenly;
                    }
                
                    .search-itemDto-center div {
                        width: 190px;
                        height: 23px;
                        font-size: 13px;
                        font-weight: normal;
                        font-stretch: normal;
                        font-style: normal;
                        line-height: 1.3;
                        letter-spacing: -0.9px;
                        text-align: left;
                        color: #343a40;
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                    }
                
                    .search-itemDto-center div.price {
                        height: 27px;
                        font-size: 17px;
                        font-weight: 600;
                        font-stretch: normal;
                        font-style: normal;
                        line-height: 1;
                        letter-spacing: -0.54px;
                        text-align: left;
                        color: #E8344E;
                    }
                
                    .search-itemDto-center span.unit {
                        width: 17px;
                        height: 18px;
                        font-size: 14px;
                        font-weight: 500;
                        font-stretch: normal;
                        font-style: normal;
                        line-height: 1;
                        letter-spacing: -0.9px;
                        text-align: center;
                        color: #000000;
                    }
                
                    .search-itemDto-right {
                        display: inline-block;
                        height: 100%;
                        vertical-align: middle
                    }
                
                    .search-itemDto-right img {
                        height: 14px;
                        width: 14px;
                        vertical-align: middle;
                        margin-top: 26px;
                        cursor: pointer;
                        padding-right: 20px;
                    }
                
                    input#query {
                        padding: 15px;
                        width: 290px;
                        border-radius: 2px;
                        background-color: #e9ecef;
                        border: none;
                
                        background-image: url('../images/icon-search.png');
                        background-repeat: no-repeat;
                        background-position: right 10px center;
                        background-size: 20px 20px;
                    }
                
                    input#query::placeholder {
                        padding: 15px;
                    }
                
                    button {
                        color: white;
                        border-radius: 4px;
                        border-radius: none;
                    }
                
                    .popup-container {
                        display: none;
                        position: fixed;
                        top: 0;
                        left: 0;
                        bottom: 0;
                        right: 0;
                        background-color: rgba(0, 0, 0, 0.5);
                        align-items: center;
                        justify-content: center;
                    }
                
                    .popup-container.active {
                        display: flex;
                    }
                
                    .popup {
                        position: absolute;
                        bottom: 0px;
                        width: 333px;
                        border-radius: 11px 11px 0px 0px;
                    }
                
                    .popup input {
                        width: 278px !important;
                        height: 39px;
                        border-radius: 2px;
                        border: solid 1.1px #dee2e6;
                        margin-right: 9px;
                        margin-bottom: 10px;
                        padding-left: 10px;
                    }
                
                    .popup p {
                        font-size: 14px;
                    }
                
                    .popup button.close {
                        position: absolute;
                        top: 15px;
                        right: 15px;
                        color: #adb5bd;
                        background-color: #fff;
                        font-size: 19px;
                        border: none;
                    }
                
                    .popup button.cta {
                        width: 319px;
                        height: 43.9px;
                        border-radius: 2px;
                        background-color: #15aabf;
                        border: none;
                    }
                
                    .popup button.cta2 {
                        width: 302.1px;
                        height: 43.9px;
                        border-radius: 2px;
                        background-color: #15aabf;
                        border: none;
                    }
                
                    #search-area, #see-area {
                        width: 330px;
                        margin: auto;
                    }
                
                    .nav {
                        width: 330px;
                        margin: 30px auto;
                        display: flex;
                        align-items: center;
                        justify-content: space-around;
                    }
                
                    .nav div {
                        cursor: pointer;
                    }
                
                    .nav div.active {
                        font-weight: 700;
                    }
                
                    .header {
                        height: 255px;
                        box-sizing: border-box;
                        background-color: #15aabf;
                        color: white;
                        text-align: center;
                        padding-top: 80px;
                        /*padding: 50px;*/
                        font-size: 45px;
                        font-weight: bold;
                    }
                
                    .none {
                        display: none;
                    }
                
                    input#kakao-login {
                        padding: 15px;
                        width: 526px;
                        border-radius: 2px;
                        background-color: #e9ecef;
                        border: none;
                
                        background-repeat: no-repeat;
                        background-position: right 10px center;
                        background-size: 20px 20px;
                    }
                }
                
                .autocomplete {
                    /*the container must be positioned relative:*/
                    position: relative;
                    display: inline-block;
                }
                
                input {
                    border: 1px solid transparent;
                    background-color: #f1f1f1;
                    padding: 10px;
                    font-size: 16px;
                }
                
                input[type=text] {
                    background-color: #f1f1f1;
                    /*width: 100%;*/
                }
                
                input[type=password] {
                    background-color: #f1f1f1;
                    /*width: 100%;*/
                }
                input[type=submit] {
                    background-color: DodgerBlue;
                    color: #fff;
                }
                .autocomplete-items {
                    position: absolute;
                    border: 1px solid #d4d4d4;
                    border-bottom: none;
                    border-top: none;
                    z-index: 99;
                    /*position the autocomplete items to be the same width as the container:*/
                    top: 100%;
                    left: 0;
                    right: 0;
                }
                .autocomplete-items div {
                    padding: 10px;
                    cursor: pointer;
                    background-color: #fff;
                    border-bottom: 1px solid #d4d4d4;
                }
                .autocomplete-items div:hover {
                    /*when hovering an item:*/
                    background-color: #e9e9e9;
                }
                .autocomplete-active {
                    /*when navigating through the items using the arrow keys:*/
                    background-color: DodgerBlue !important;
                    color: #ffffff;
                }
                
                .alert-danger {
                    color: #721c24;
                    background-color: #f8d7da;
                    border-color: #f5c6cb;
                }
                
                .alert {
                    width: 300px;
                    margin-top: 22px;
                    padding: 1.75rem 1.25rem;
                    border: 1px solid transparent;
                    border-radius: .25rem;
                }
                ```
                
        - images
            - **[ÏΩîÎìú Ïä§ÎãàÌé´] Ï†ÄÏû• ÏïÑÏù¥ÏΩò (icon-save.png)**
                
                ```java
                https://s3.ap-northeast-2.amazonaws.com/materials.spartacodingclub.kr/spring/week04/icon-save.png
                ```
                
            - **[ÏΩîÎìú Ïä§ÎãàÌé´] Í≤ÄÏÉâ ÏïÑÏù¥ÏΩò (icon-search.png)**
                
                ```java
                https://s3.ap-northeast-2.amazonaws.com/materials.spartacodingclub.kr/spring/week04/icon-search.png
                ```
                
        - js
            - **[ÏΩîÎìú Ïä§ÎãàÌé´] basic.js**
                
                ```jsx
                const host = 'http://' + window.location.host;
                let targetId;
                
                $(document).ready(function () {
                
                    showProduct();
                
                    // id Í∞Ä query Ïù∏ ÎÖÄÏÑù ÏúÑÏóêÏÑú ÏóîÌÑ∞Î•º ÎàÑÎ•¥Î©¥ execSearch() Ìï®ÏàòÎ•º Ïã§ÌñâÌïòÎùºÎäî ÎúªÏûÖÎãàÎã§.
                    $('#query').on('keypress', function (e) {
                        if (e.key == 'Enter') {
                            execSearch();
                        }
                    });
                    $('#close').on('click', function () {
                        $('#container').removeClass('active');
                    })
                    $('#close2').on('click', function () {
                        $('#container2').removeClass('active');
                    })
                    $('.nav div.nav-see').on('click', function () {
                        $('div.nav-see').addClass('active');
                        $('div.nav-search').removeClass('active');
                
                        $('#see-area').show();
                        $('#search-area').hide();
                    })
                    $('.nav div.nav-search').on('click', function () {
                        $('div.nav-see').removeClass('active');
                        $('div.nav-search').addClass('active');
                
                        $('#see-area').hide();
                        $('#search-area').show();
                    })
                
                    $('#see-area').show();
                    $('#search-area').hide();
                })
                
                function numberWithCommas(x) {
                    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                }
                
                function execSearch() {
                    /**
                     * Í≤ÄÏÉâÏñ¥ input id: query
                     * Í≤ÄÏÉâÍ≤∞Í≥º Î™©Î°ù: #search-result-box
                     * Í≤ÄÏÉâÍ≤∞Í≥º HTML ÎßåÎìúÎäî Ìï®Ïàò: addHTML
                     */
                        // 1. Í≤ÄÏÉâÏ∞ΩÏùò ÏûÖÎ†•Í∞íÏùÑ Í∞ÄÏ†∏Ïò®Îã§.
                    let query = $('#query').val();
                
                    // 2. Í≤ÄÏÉâÏ∞Ω ÏûÖÎ†•Í∞íÏùÑ Í≤ÄÏÇ¨ÌïòÍ≥†, ÏûÖÎ†•ÌïòÏßÄ ÏïäÏïòÏùÑ Í≤ΩÏö∞ focus.
                    if (query == '') {
                        alert('Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî');
                        $('#query').focus();
                        return;
                    }
                    // 3. GET /api/search?query=${query} ÏöîÏ≤≠
                    $.ajax({
                        type: 'GET',
                        url: `/api/search?query=${query}`,
                        success: function (response) {
                            $('#search-result-box').empty();
                            // 4. for Î¨∏ÎßàÎã§ itemDtoÎ•º Í∫ºÎÇ¥ÏÑú HTML ÎßåÎì§Í≥† Í≤ÄÏÉâÍ≤∞Í≥º Î™©Î°ùÏóê Î∂ôÏù¥Í∏∞!
                            for (let i = 0; i < response.length; i++) {
                                let itemDto = response[i];
                                let tempHtml = addHTML(itemDto);
                                $('#search-result-box').append(tempHtml);
                            }
                        },
                        error(error, status, request) {
                            console.error(error);
                        }
                    })
                
                }
                
                function addHTML(itemDto) {
                    /**
                     * class="search-itemDto" Ïù∏ ÎÖÄÏÑùÏóêÏÑú
                     * image, title, lprice, addProduct ÌôúÏö©ÌïòÍ∏∞
                     * Ï∞∏Í≥†) onclick='addProduct(${JSON.stringify(itemDto)})'
                     */
                    return `<div class="search-itemDto">
                        <div class="search-itemDto-left">
                            <img src="${itemDto.image}" alt="">
                        </div>
                        <div class="search-itemDto-center">
                            <div>${itemDto.title}</div>
                            <div class="price">
                                ${numberWithCommas(itemDto.lprice)}
                                <span class="unit">Ïõê</span>
                            </div>
                        </div>
                        <div class="search-itemDto-right">
                            <img src="../images/icon-save.png" alt="" onclick='addProduct(${JSON.stringify(itemDto)})'>
                        </div>
                    </div>`
                }
                
                function addProduct(itemDto) {
                    /**
                     * modal Îú®Í≤å ÌïòÎäî Î≤ï: $('#container').addClass('active');
                     * dataÎ•º ajaxÎ°ú Ï†ÑÎã¨Ìï† ÎïåÎäî Îëê Í∞ÄÏßÄÍ∞Ä Îß§Ïö∞ Ï§ëÏöî
                     * 1. contentType: "application/json",
                     * 2. data: JSON.stringify(itemDto),
                     */
                
                    // 1. POST /api/products Ïóê Í¥ÄÏã¨ ÏÉÅÌíà ÏÉùÏÑ± ÏöîÏ≤≠
                    $.ajax({
                        type: 'POST',
                        url: '/api/products',
                        contentType: 'application/json',
                        data: JSON.stringify(itemDto),
                        success: function (response) {
                            // 2. ÏùëÎãµ Ìï®ÏàòÏóêÏÑú modalÏùÑ Îú®Í≤å ÌïòÍ≥†, targetId Î•º reponse.id Î°ú ÏÑ§Ï†ï
                            $('#container').addClass('active');
                            targetId = response.id;
                        },
                        error(error, status, request) {
                            console.log(error);
                        }
                    });
                }
                function showProduct(isAdmin = false) {
                    /**
                     * Í¥ÄÏã¨ÏÉÅÌíà Î™©Î°ù: #product-container
                     * Í≤ÄÏÉâÍ≤∞Í≥º Î™©Î°ù: #search-result-box
                     * Í¥ÄÏã¨ÏÉÅÌíà HTML ÎßåÎìúÎäî Ìï®Ïàò: addProductItem
                     */
                
                    $.ajax({
                        type: 'GET',
                        url: '/api/products',
                        contentType: 'application/json',
                        success: function (response) {
                            $('#product-container').empty();
                            for (let i = 0; i < response.length; i++) {
                                let product = response[i];
                                let tempHtml = addProductItem(product);
                                $('#product-container').append(tempHtml);
                            }
                        },
                        error(error, status, request) {
                						console.log(error);
                        }
                    });
                
                }
                
                function addProductItem(product) {
                    console.log(product)
                    return `<div class="product-card">
                                <div onclick="window.location.href='${product.link}'">
                                    <div class="card-header">
                                        <img src="${product.image}"
                                             alt="">
                                    </div>
                                    <div class="card-body">
                                        <div class="title">
                                            ${product.title}
                                        </div>
                                        <div class="lprice">
                                            <span>${numberWithCommas(product.lprice)}</span>Ïõê
                                        </div>
                                        <div class="isgood ${product.lprice > product.myprice ? 'none' : ''}">
                                            ÏµúÏ†ÄÍ∞Ä
                                        </div>
                                    </div>
                                </div>
                            </div>`;
                }
                
                function setMyprice() {
                    /**
                     * 1. idÍ∞Ä myprice Ïù∏ input ÌÉúÍ∑∏ÏóêÏÑú Í∞íÏùÑ Í∞ÄÏ†∏Ïò®Îã§.
                     * 2. ÎßåÏïΩ Í∞íÏùÑ ÏûÖÎ†•ÌïòÏßÄ ÏïäÏïòÏúºÎ©¥ alertÎ•º ÎùÑÏö∞Í≥† Ï§ëÎã®ÌïúÎã§.
                     * 3. PUT /api/product/${targetId} Ïóê dataÎ•º Ï†ÑÎã¨ÌïúÎã§.
                     *    Ï£ºÏùò) contentType: "application/json",
                     *         data: JSON.stringify({myprice: myprice}),
                     *         Îπ†Îú®Î¶¨ÏßÄ Îßê Í≤É!
                     * 4. Î™®Îã¨ÏùÑ Ï¢ÖÎ£åÌïúÎã§. $('#container').removeClass('active');
                     * 5, ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Îì±Î°ùÎêòÏóàÏùåÏùÑ ÏïåÎ¶¨Îäî alertÎ•º ÎùÑÏö¥Îã§.
                     * 6. Ï∞ΩÏùÑ ÏÉàÎ°úÍ≥†Ïπ®ÌïúÎã§. window.location.reload();
                     */
                        // 1. idÍ∞Ä myprice Ïù∏ input ÌÉúÍ∑∏ÏóêÏÑú Í∞íÏùÑ Í∞ÄÏ†∏Ïò®Îã§.
                    let myprice = $('#myprice').val();
                    // 2. ÎßåÏïΩ Í∞íÏùÑ ÏûÖÎ†•ÌïòÏßÄ ÏïäÏïòÏúºÎ©¥ alertÎ•º ÎùÑÏö∞Í≥† Ï§ëÎã®ÌïúÎã§.
                    if (myprice == '') {
                        alert('Ïò¨Î∞îÎ•∏ Í∞ÄÍ≤©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî');
                        return;
                    }
                
                    // 3. PUT /api/product/${targetId} Ïóê dataÎ•º Ï†ÑÎã¨ÌïúÎã§.
                    $.ajax({
                        type: 'PUT',
                        url: `/api/products/${targetId}`,
                        contentType: 'application/json',
                        data: JSON.stringify({myprice: myprice}),
                        success: function (response) {
                
                            // 4. Î™®Îã¨ÏùÑ Ï¢ÖÎ£åÌïúÎã§. $('#container').removeClass('active');
                            $('#container').removeClass('active');
                            // 5. ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Îì±Î°ùÎêòÏóàÏùåÏùÑ ÏïåÎ¶¨Îäî alertÎ•º ÎùÑÏö¥Îã§.
                            alert('ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Îì±Î°ùÎêòÏóàÏäµÎãàÎã§.');
                            // 6. Ï∞ΩÏùÑ ÏÉàÎ°úÍ≥†Ïπ®ÌïúÎã§. window.location.reload();
                            window.location.reload();
                        },
                        error(error, status, request) {
                            console.error(error);
                        }
                    })
                }
                ```
                
- ÏÉÅÌíà Í≤ÄÏÉâ API Íµ¨ÌòÑ Î∞è ÌôïÏù∏
    
    [Ï†úÎ™© ÏóÜÎäî Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§](https://www.notion.so/97767488f57a495886d2fcd66fd8e776?pvs=21)
    - **[ÏΩîÎìú Ïä§ÎãàÌé´] naver > controller > NaverApiController**
        
        ```java
        package com.sparta.myselectshop.naver.controller;
        
        import com.sparta.myselectshop.naver.dto.ItemDto;
        import com.sparta.myselectshop.naver.service.NaverApiService;
        import lombok.RequiredArgsConstructor;
        import org.springframework.web.bind.annotation.GetMapping;
        import org.springframework.web.bind.annotation.RequestMapping;
        import org.springframework.web.bind.annotation.RequestParam;
        import org.springframework.web.bind.annotation.RestController;
        
        import java.util.List;
        
        @RestController
        @RequiredArgsConstructor
        @RequestMapping("/api")
        public class NaverApiController {
        
            private final NaverApiService naverApiService;
        
            @GetMapping("/search")
            public List<ItemDto> searchItems(@RequestParam String query)  {
                return naverApiService.searchItems(query);
            }
        }
        ```
        
    - **[ÏΩîÎìú Ïä§ÎãàÌé´] naver > dto > ItemDto**
        
        ```java
        package com.sparta.myselectshop.naver.dto;
        
        import lombok.Getter;
        import lombok.NoArgsConstructor;
        import org.json.JSONObject;
        
        @Getter
        @NoArgsConstructor
        public class ItemDto {
            private String title;
            private String link;
            private String image;
            private int lprice;
        
            public ItemDto(JSONObject itemJson) {
                this.title = itemJson.getString("title");
                this.link = itemJson.getString("link");
                this.image = itemJson.getString("image");
                this.lprice = itemJson.getInt("lprice");
            }
        }
        ```
        
    - **[ÏΩîÎìú Ïä§ÎãàÌé´] naver > service > NaverApiService**
        
        ```java
        package com.sparta.myselectshop.naver.service;
        
        import com.sparta.myselectshop.naver.dto.ItemDto;
        import lombok.extern.slf4j.Slf4j;
        import org.json.JSONArray;
        import org.json.JSONObject;
        import org.springframework.boot.web.client.RestTemplateBuilder;
        import org.springframework.http.RequestEntity;
        import org.springframework.http.ResponseEntity;
        import org.springframework.stereotype.Service;
        import org.springframework.web.client.RestTemplate;
        import org.springframework.web.util.UriComponentsBuilder;
        
        import java.net.URI;
        import java.util.ArrayList;
        import java.util.List;
        
        @Slf4j(topic = "NAVER API")
        @Service
        public class NaverApiService {
        
            private final RestTemplate restTemplate;
        
            public NaverApiService(RestTemplateBuilder builder) {
                this.restTemplate = builder.build();
            }
        
            public List<ItemDto> searchItems(String query) {
                // ÏöîÏ≤≠ URL ÎßåÎì§Í∏∞
                URI uri = UriComponentsBuilder
                        .fromUriString("https://openapi.naver.com")
                        .path("/v1/search/shop.json")
                        .queryParam("display", 15)
                        .queryParam("query", query)
                        .encode()
                        .build()
                        .toUri();
                log.info("uri = " + uri);
        
                RequestEntity<Void> requestEntity = RequestEntity
                        .get(uri)
                        .header("X-Naver-Client-Id", "{Client-Id}")
                        .header("X-Naver-Client-Secret", "{Client-Secret}")
                        .build();
        
                ResponseEntity<String> responseEntity = restTemplate.exchange(requestEntity, String.class);
        
                log.info("NAVER API Status Code : " + responseEntity.getStatusCode());
        
                return fromJSONtoItems(responseEntity.getBody());
            }
        
            public List<ItemDto> fromJSONtoItems(String responseEntity) {
                JSONObject jsonObject = new JSONObject(responseEntity);
                JSONArray items  = jsonObject.getJSONArray("items");
                List<ItemDto> itemDtoList = new ArrayList<>();
        
                for (Object item : items) {
                    ItemDto itemDto = new ItemDto((JSONObject) item);
                    itemDtoList.add(itemDto);
                }
        
                return itemDtoList;
            }
        }
        ```
        
- ÏöîÍµ¨ÏÇ¨Ìï≠ ÌååÏïÖ
    1. ÌÇ§ÏõåÎìúÎ°ú ÏÉÅÌíàÏùò Ï†ïÎ≥¥ Í≤ÄÏÉâ
        1. ÎÑ§Ïù¥Î≤Ñ ÏáºÌïë API Ïù¥Ïö©
        2. ÏÉÅÌíà Ïù¥Î¶Ñ (title), ÎßÅÌÅ¨ URL (link),  Ïù¥ÎØ∏ÏßÄ URL (image), ÏµúÏ†ÄÍ∞Ä (lprice)
    2. Í¥ÄÏã¨ ÏÉÅÌíà Îì±Î°ùÌïòÍ∏∞
        1.  DB Ïóê ÏÉÅÌíàÏ†ïÎ≥¥ ÏûÖÎ†• (Insert)
            1. ÏÉÅÌíà Ïù¥Î¶Ñ (title), ÎßÅÌÅ¨ URL (link),  Ïù¥ÎØ∏ÏßÄ URL (image), ÏµúÏ†ÄÍ∞Ä (lprice)
            2. Ìù¨Îßù ÏµúÏ†ÄÍ∞Ä (myprice) ‚Üí 0ÏõêÏúºÎ°ú ÏÑ§Ï†ï
    3. Í¥ÄÏã¨ ÏÉÅÌíàÏùò "Ìù¨Îßù ÏµúÏ†ÄÍ∞Ä" ÏÑ§Ï†ïÌïòÍ∏∞
        1. DB ÏóÖÎç∞Ïù¥Ìä∏ (Update)
            1. Îì±Î°ùÎêú Í¥ÄÏã¨ÏÉÅÌíàÏùò "Ìù¨Îßù ÏµúÏ†ÄÍ∞Ä" (myprice) Îßå ÏóÖÎç∞Ïù¥Ìä∏
    4. Í¥ÄÏã¨ ÏÉÅÌíà Ï°∞ÌöåÌïòÍ∏∞
        1. DB Ï°∞Ìöå (Select)
            1. Îì±Î°ùÎêú Î™®Îì† Í¥ÄÏã¨ÏÉÅÌíà Ï†ïÎ≥¥ Ï°∞Ìöå
        2. UI Ïóê 'ÏµúÏ†ÄÍ∞Ä' ÌëúÏãú Ï°∞Í±¥
            1. Ìù¨ÎßùÌïòÎäî ÏµúÏ†ÄÍ∞ÄÎ≥¥Îã§ Ïã§Ï†ú ÏµúÏ†ÄÍ∞ÄÍ∞Ä ÎÇÆÏùÄ Í≤ΩÏö∞
            
- API ÏÑ§Í≥ÑÌïòÍ∏∞  
    [Ï†úÎ™© ÏóÜÎäî Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§](https://www.notion.so/5b81a7a120724ee787376b003ac21cb1?pvs=21)
    
## 15. Í¥ÄÏã¨ÏÉÅÌíà API Íµ¨ÌòÑ

- Í¥ÄÏã¨ÏÉÅÌíà Îì±Î°ù API
    ![Untitled (6).png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7ca260bd-c8d1-480c-a4de-c3d25d079ebb/Untitled_(6).png)
    1. DB ÏÉÅÌíà ÌÖåÏù¥Î∏îÏóê ÎåÄÏùëÎêòÎäî Entity
        - **[ÏΩîÎìú Ïä§ÎãàÌé´] entity > Product**
            
            ```java
            package com.sparta.myselectshop.entity;
            
            import com.sparta.myselectshop.dto.ProductRequestDto;
            import jakarta.persistence.*;
            import lombok.Getter;
            import lombok.NoArgsConstructor;
            import lombok.Setter;
            
            @Entity // JPAÍ∞Ä Í¥ÄÎ¶¨Ìï† Ïàò ÏûàÎäî Entity ÌÅ¥ÎûòÏä§ ÏßÄÏ†ï
            @Getter
            @Setter
            @Table(name = "product") // Îß§ÌïëÌï† ÌÖåÏù¥Î∏îÏùò Ïù¥Î¶ÑÏùÑ ÏßÄÏ†ï
            @NoArgsConstructor
            public class Product extends Timestamped {
            
                @Id
                @GeneratedValue(strategy = GenerationType.IDENTITY)
                private Long id;
            
                @Column(nullable = false)
                private String title;
            
                @Column(nullable = false)
                private String image;
            
                @Column(nullable = false)
                private String link;
            
                @Column(nullable = false)
                private int lprice;
            
                @Column(nullable = false)
                private int myprice;
            
                public Product(ProductRequestDto requestDto) {
                    this.title = requestDto.getTitle();
                    this.image = requestDto.getImage();
                    this.link = requestDto.getLink();
                    this.lprice = requestDto.getLprice();
                }
            }
            ```
            
        - **[ÏΩîÎìú Ïä§ÎãàÌé´] entity > Timestamped**
            
            ```java
            package com.sparta.myselectshop.entity;
            
            import jakarta.persistence.*;
            import lombok.Getter;
            import org.springframework.data.annotation.CreatedDate;
            import org.springframework.data.annotation.LastModifiedDate;
            import org.springframework.data.jpa.domain.support.AuditingEntityListener;
            
            import java.time.LocalDateTime;
            
            @Getter
            @MappedSuperclass
            @EntityListeners(AuditingEntityListener.class)
            public abstract class Timestamped {
            
                @CreatedDate
                @Column(updatable = false)
                @Temporal(TemporalType.TIMESTAMP)
                private LocalDateTime createdAt;
            
                @LastModifiedDate
                @Column
                @Temporal(TemporalType.TIMESTAMP)
                private LocalDateTime modifiedAt;
            }
            ```
            
    2. ÏöîÏ≤≠ Î∞õÍ∏∞ Î∞è ÏùëÎãµ Î≥¥ÎÇ¥Í∏∞ (Controller)
        
        ```java
        // Í¥ÄÏã¨ ÏÉÅÌíà Îì±Î°ùÌïòÍ∏∞
        @PostMapping("/products")
        public ProductResponseDto createProduct(@RequestBody ProductRequestDto requestDto) {
            // ÏùëÎãµ Î≥¥ÎÇ¥Í∏∞
            return productService.createProduct(requestDto);
        }
        ```
        
    3. Í¥ÄÏã¨ÏÉÅÌíà Îì±Î°ù ÏöîÏ≤≠ DTO
        - **[ÏΩîÎìú Ïä§ÎãàÌé´] ProductRequestDto**
            
            ```java
            package com.sparta.myselectshop.dto;
            
            import lombok.AllArgsConstructor;
            import lombok.Getter;
            import lombok.NoArgsConstructor;
            
            @Getter
            @NoArgsConstructor
            @AllArgsConstructor
            public class ProductRequestDto {
                // Í¥ÄÏã¨ÏÉÅÌíàÎ™Ö
                private String title;
                // Í¥ÄÏã¨ÏÉÅÌíà Ïç∏ÎÑ§Ïùº image URL
                private String image;
                // Í¥ÄÏã¨ÏÉÅÌíà Íµ¨Îß§ÎßÅÌÅ¨ URL
                private String link;
                // Í¥ÄÏã¨ÏÉÅÌíàÏùò ÏµúÏ†ÄÍ∞Ä
                private int lprice;
            }
            ```
            
    4. Í¥ÄÏã¨ÏÉÅÌíà Îì±Î°ù ÏùëÎãµ DTO
        - **[ÏΩîÎìú Ïä§ÎãàÌé´] ProductResponseDto**
            
            ```java
            package com.sparta.myselectshop.dto;
            
            import com.sparta.myselectshop.entity.Product;
            import lombok.Getter;
            import lombok.NoArgsConstructor;
            
            @Getter
            @NoArgsConstructor
            public class ProductResponseDto {
                private Long id;
                private String title;
                private String link;
                private String image;
                private int lprice;
                private int myprice;
            
                public ProductResponseDto(Product product) {
                    this.id = product.getId();
                    this.title = product.getTitle();
                    this.link = product.getLink();
                    this.image = product.getImage();
                    this.lprice = product.getLprice();
                    this.myprice = product.getMyprice();
                }
            }
            ```
            
    5. Entity Í∞ùÏ≤¥ ÏÉùÏÑ± Î∞è DB Ï†ÄÏû• (Service)
        
        ```java
        public ProductResponseDto createProduct(ProductRequestDto requestDto) {
            Product product = productRepository.save(new Product(requestDto));
            return new ProductResponseDto(product);
        }
        ```
        
- Í¥ÄÏã¨ÏÉÅÌíà Ìù¨Îßù ÏµúÏ†ÄÍ∞Ä ÏóÖÎç∞Ïù¥Ìä∏ API
    ![Untitled (7).png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8c8aaf6e-bf9d-4aeb-9d3b-becd949f4b50/Untitled_(7).png)
    1. ÏöîÏ≤≠ Î∞õÍ∏∞ Î∞è ÏùëÎãµ Î≥¥ÎÇ¥Í∏∞ (Controller)
        
        ```java
        // Í¥ÄÏã¨ ÏÉÅÌíà Ìù¨Îßù ÏµúÏ†ÄÍ∞Ä Îì±Î°ùÌïòÍ∏∞
        @PutMapping("/products/{id}")
        public ProductResponseDto updateProduct(@PathVariable Long id, @RequestBody ProductMypriceRequestDto requestDto) {
            // ÏùëÎãµ Î≥¥ÎÇ¥Í∏∞
            return productService.updateProduct(id, requestDto);
        }
        ```
        
    2. Í¥ÄÏã¨ÏÉÅÌíà Ìù¨Îßù ÏµúÏ†ÄÍ∞Ä ÏóÖÎç∞Ïù¥Ìä∏ ÏöîÏ≤≠ DTO
        - **[ÏΩîÎìú Ïä§ÎãàÌé´] ProductMypriceRequestDto**
            
            ```java
            package com.sparta.myselectshop.dto;
            
            import lombok.Getter;
            import lombok.Setter;
            
            @Getter
            @Setter
            public class ProductMypriceRequestDto {
                private int myprice;
            }
            ```
            
    3. DB Ï°∞Ìöå Î∞è ÏàòÏ†ï (Service)
        
        ```java
        public static final int MIN_MY_PRICE = 100;
        ...
        @Transactional
        public ProductResponseDto updateProduct(Long id, ProductMypriceRequestDto requestDto) {
            int myprice = requestDto.getMyprice();
            if (myprice < MIN_MY_PRICE) {
                throw new IllegalArgumentException("Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ Í¥ÄÏã¨ Í∞ÄÍ≤©ÏûÖÎãàÎã§. ÏµúÏÜå " + MIN_MY_PRICE + " Ïõê Ïù¥ÏÉÅÏúºÎ°ú ÏÑ§Ï†ïÌï¥ Ï£ºÏÑ∏Ïöî.");
            }
        
            Product product = productRepository.findById(id).orElseThrow(() ->
                    new NullPointerException("Ìï¥Îãπ ÏÉÅÌíàÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.")
            );
        
        		product.update(requestDto);
        
            return new ProductResponseDto(product);
        }
        ```
        
    4. Product Entity ÏµúÏ†Ä Ìù¨ÎßùÍ∞Ä (myprice) ÏàòÏ†ï (Product)
        
        ```java
        public void update(ProductMypriceRequestDto requestDto) {
            this.myprice = requestDto.getMyprice();
        }
        ```
        
- Í¥ÄÏã¨ÏÉÅÌíà Ï°∞Ìöå API
    ![Untitled (8).png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/bf9fb59c-bd04-470f-bd38-4513c08a33c6/Untitled_(8).png)
    1. ÏöîÏ≤≠ Î∞õÍ∏∞ Î∞è ÏùëÎãµ Î≥¥ÎÇ¥Í∏∞
        
        ```java
        // Í¥ÄÏã¨ ÏÉÅÌíà Ï°∞ÌöåÌïòÍ∏∞
        @GetMapping("/products")
        public List<ProductResponseDto> getProducts() {
            // ÏùëÎãµ Î≥¥ÎÇ¥Í∏∞
            return productService.getProducts();
        }
        ```
        
    2. DB Ï°∞Ìöå
        
        ```java
        public List<ProductResponseDto> getProducts() {
            List<Product> productList = productRepository.findAll();
            List<ProductResponseDto> responseDtoList = new ArrayList<>();
        
            for (Product product : productList) {
                responseDtoList.add(new ProductResponseDto(product));
            }
            return responseDtoList;
        }
        ```
        
## 16. Scheduler Íµ¨ÌòÑ

- ÏöîÍµ¨ Í∏∞Îä•
    üëâ Îß§Ïùº ÏÉàÎ≤Ω 1ÏãúÏóê Í¥ÄÏã¨ ÏÉÅÌíà Î™©Î°ù Ï†úÎ™©ÏúºÎ°ú Í≤ÄÏÉâÌï¥ÏÑú, ÏµúÏ†ÄÍ∞Ä Ï†ïÎ≥¥Î•º ÏóÖÎç∞Ïù¥Ìä∏ÌïòÎäî Ïä§ÏºÄÏ§ÑÎü¨Î•º ÎßåÎì§Ïñ¥Î≥¥Í≤†ÏäµÎãàÎã§.
    - [ÏΩîÎìú Ïä§ÎãàÌé´] **CronExpression**
        
        ```
        https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/support/CronExpression.html
        ```
        
- Scheduler Íµ¨ÌòÑ
    - **[ÏΩîÎìú Ïä§ÎãàÌé´] scheduler > Scheduler**
        
        ```java
        package com.sparta.myselectshop.scheduler;
        
        import com.sparta.myselectshop.entity.Product;
        import com.sparta.myselectshop.naver.dto.ItemDto;
        import com.sparta.myselectshop.naver.service.NaverApiService;
        import com.sparta.myselectshop.repository.ProductRepository;
        import com.sparta.myselectshop.service.ProductService;
        import lombok.RequiredArgsConstructor;
        import lombok.extern.slf4j.Slf4j;
        import org.springframework.scheduling.annotation.Scheduled;
        import org.springframework.stereotype.Component;
        
        import java.util.List;
        import java.util.concurrent.TimeUnit;
        
        @Slf4j(topic = "Scheduler")
        @Component
        @RequiredArgsConstructor
        public class Scheduler {
        
            private final NaverApiService naverApiService;
            private final ProductService productService;
            private final ProductRepository productRepository;
        
            // Ï¥à, Î∂Ñ, Ïãú, Ïùº, Ïõî, Ï£º ÏàúÏÑú
            @Scheduled(cron = "0 0 1 * * *") // Îß§Ïùº ÏÉàÎ≤Ω 1Ïãú
            public void updatePrice() throws InterruptedException {
                log.info("Í∞ÄÍ≤© ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìñâ");
                List<Product> productList = productRepository.findAll();
                for (Product product : productList) {
                    // 1Ï¥àÏóê Ìïú ÏÉÅÌíà Ïî© Ï°∞ÌöåÌï©ÎãàÎã§ (NAVER Ï†úÌïú)
                    TimeUnit.SECONDS.sleep(1);
        
                    // i Î≤àÏß∏ Í¥ÄÏã¨ ÏÉÅÌíàÏùò Ï†úÎ™©ÏúºÎ°ú Í≤ÄÏÉâÏùÑ Ïã§ÌñâÌï©ÎãàÎã§.
                    String title = product.getTitle();
                    List<ItemDto> itemDtoList = naverApiService.searchItems(title);
        
                    if (itemDtoList.size() > 0) {
                        ItemDto itemDto = itemDtoList.get(0);
                        // i Î≤àÏß∏ Í¥ÄÏã¨ ÏÉÅÌíà Ï†ïÎ≥¥Î•º ÏóÖÎç∞Ïù¥Ìä∏Ìï©ÎãàÎã§.
                        Long id = product.getId();
                        try {
                            productService.updateBySearch(id, itemDto);
                        } catch (Exception e) {
                            log.error(id + " : " + e.getMessage());
                        }
                    }
                }
            }
        
        }
        ```
        
    - **ProductService**
        
        ```java
        @Transactional
        public void updateBySearch(Long id, ItemDto itemDto) {
            Product product = productRepository.findById(id).orElseThrow(
                    () -> new NullPointerException("Ìï¥Îãπ ÏÉÅÌíàÏùÄ Ï°¥Ïû¨ÌïòÏßÄ ÏïäÏäµÎãàÎã§.")
            );
            product.updateByItemDto(itemDto);
        }
        ```
        
    - **Product**
        
        ```java
        public void updateByItemDto(ItemDto itemDto) {
            this.lprice = itemDto.getLprice();
        }
        ```
        
    - **@EnableScheduling**
        
        ```java
        @EnableScheduling // Ïä§ÌîÑÎßÅ Î∂ÄÌä∏ÏóêÏÑú Ïä§ÏºÄÏ§ÑÎü¨Í∞Ä ÏûëÎèôÌïòÍ≤å Ìï©ÎãàÎã§.
        @EnableJpaAuditing // ÏãúÍ∞Ñ ÏûêÎèô Î≥ÄÍ≤ΩÏù¥ Í∞ÄÎä•ÌïòÎèÑÎ°ù Ìï©ÎãàÎã§.
        @SpringBootApplication
        public class MyselectshopApplication {
        
            public static void main(String[] args) {
                SpringApplication.run(MyselectshopApplication.class, args);
            }
        
        }
        ```
